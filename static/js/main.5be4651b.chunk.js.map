{"version":3,"sources":["markdown/ChangeLog.md","components/ChangeLog.js","markdown/InfoSection.md","components/InfoSection.js","components/InfoModal.js","components/UploadPartyModal.js","components/AppHeader.js","components/AppFooter.js","icons/attack.png","icons/health.png","icons/intelligence.png","icons/defense.png","icons/speed.png","components/MonsterClassIcon.js","icons/nature.png","icons/chaos.png","icons/sorcery.png","icons/death.png","icons/life.png","components/MonsterSelectionModal.js","functions/getTraitErrors.js","components/MonsterPlanner.js","components/SpecializationPlanner.js","functions/parsePartyString.js","functions/randomSample.js","SiralimPlanner.js","App.js","reportWebVitals.js","index.js"],"names":["ChangeLog","state","markdown","fetch","md","then","res","text","setState","this","PureComponent","InfoSection","InfoModal","className","overlayClassName","isOpen","props","modalIsOpen","id","onClick","closeModal","icon","faTimes","UploadPartyModal","partyString","error","uploadPartyFromString","err","message","bind","e","target","value","autoFocus","placeholder","onChange","handleInputChange","handleUploadPartyString","faUpload","Component","AppHeader","process","href","rel","compendiumVersion","openUploadBuildModal","resetBuild","randomiseBuild","faDice","openInfoModal","faInfoCircle","AppFooter","MonsterClassIcon","str","pi","toLowerCase","title","replace","txt","charAt","toUpperCase","substr","src","alt","metadata","require","HeaderField","stat","icon_health","icon_attack","icon_intelligence","icon_defense","icon_speed","faCaretUp","sortOrder","type","faSortNumericDownAlt","faSortAlphaDownAlt","faSortNumericDown","faSortAlphaDown","class_name","sortable","updateSortField","sort_name","startsWith","renderStatIcon","field_name","renderSortButton","MonsterSelectionRowHeader","sortField","not_sortable","map","field","i","MonsterStat","avgStat","average_stats","minStat","min_stats","maxStat","max_stats","colour","positive","opacity","style","getStatBackground","MonsterStats","Fragment","MonsterSelectionRow","cls","fullName","c","class","iconedClass","inParty","faCheck","renderClass","renderFullRow","family","creature","trait_name","trait_description","stats","material_name","getPageFamily","m","MonsterSelectionModal","filteredItems","filteredItemGroups","currentPage","currentSearchTerm","appliedSearchTerm","searchTimeout","tableRef","React","createRef","filterResults","items","itemGroups","currentGroup","monstersInCurrentGroup","length","f","familyStart","push","Math","max","end","familyEnd","window","clearTimeout","setTimeout","applySearchTerm","order","sort","a","b","sf","split","af","_","get","bf","compare","searchTerm","item","search_text","indexOf","sortedFilteredItems","sortResults","getItemGroups","current","scrollTo","r","pageNum","itemGroup","pageStart","pageEnd","start","String","slice","startIndex","endIndex","slot","currentTraitSlotId","slot_n","currentMonster","isEmpty","currentSelectedMonster","currentPartyMemberId","handleSearchChange","role","goToPage","renderPageName","ref","monsterRow","uid","onMouseUp","updatePartyMember","monstersInParty","has","renderResultsCount","getTraitErrors","monster","traitSlotIndex","MonsterPlannerRow","MonsterPlannerCreatureSprite","sprite_filename","MonsterPlannerTraitSlot","justUpdated","justUpdatedTimeout","prevProps","prevState","isEqual","setJustUpdated","clearJustUpdated","faExclamationTriangle","rowErrors","emptyRow","isEmptyRow","rowClass","draggable","onDragStart","onDragOver","onDrop","renderEmptyRow","clearPartyMember","MonsterPlannerCreatureClass","monsterClass","MonsterPlannerCreatureStats","health","attack","intelligence","defense","speed","m1","monster_1","m2","monster_2","floor","MonsterPlannerRelicSlot","relicName","MonsterPlannerPartyMember","getMonsterClass","pm1","partyMember","pm2","onRelicClick","relic","name","abbreviation","traitSlot","partyMemberId","traitSlotId","RelicSelectionModal","currentRelic","relicsList","statIcon","s","handleRelicChange","getStatIcon","stat_bonus","updateRelic","faSave","perks","perk","rank","description","MonsterPlanner","handleDragStart","data","event","fromItem","JSON","stringify","dataTransfer","setData","dragging","handleDragOver","preventDefault","handleDrop","parse","getData","toItem","swapItems","partyMembers","fromPID","fromTID","toPID","toTID","fromObj","toObj","updatePartyMembers","relicIndex","myRef","openModal","newRelic","newRelics","relics","updateRelics","relicModalIsOpen","closeRelicModal","openRelicModal","handleMouseUp","specializationsList","Option","components","ValueContainer","IconOption","label","MyValueContainer","children","hasValue","getValue","customStyles","control","provided","border","isSelected","isFocused","color","boxShadow","SpecializationPlannerAnointmentsModal","currentSpecialization","specializations","specialization","anointmentNames","Set","anointmentsInSpecialization","anointments","hasOwnProperty","spec_abbrev","add","maxAnointments","handleSpecializationChange","atMaxAnointments","toggleAnointment","anointment","undefined","par","SpecializationPlannerAnointment","spec","SpecializationPlanner","anointmentsModalIsOpen","document","body","selectedOption","updateSpecialization","freeAnointmentSlots","Array","fill","specOptions","toggleOpen","faChevronLeft","faChevronRight","closeAnointmentsModal","styles","options","menuPosition","openAnointmentsModal","faBolt","parsePartyString","Error","sections","anointment_names","line","size","parseCharacterSection","innateDetectionText","fusedDetectionText","traitSlotDetectionText","relicSlotDetectionText","creatures","innates","secondaries","artifacts","innateTrait","secondaryTrait","artifactTrait","lines","atLeastOne","traitsArray","relicsArray","innate","fusion","artifact","traits","parseCreatureSection","randomSample","random","Modal","setAppElement","monsterData","compendium_version","monsterUIDMap","monsterMap","parseInt","buildUIDMap","monsterTraitMap","traitMap","buildTraitMap","anointmentUIDMap","anointmentNameMap","p","buildAnointmentMaps","specializationNameMap","buildSpecializationNameMap","relicUIDMap","buildRelicUIDMap","NotificationBanner","hidden","fadeOutTimeout","status","notificationIndex","setHidden","SiralimPlanner","originalState","currentSlotId","infoModalIsOpen","uploadBuildModalIsOpen","notificationText","notificationStatus","saveString","pm","history","getMonstersInParty","generateSaveString","newMembers","newAnointments","console","log","uids","currentUid","a_uids","match","seen_uids","noti","j","min","windowUrl","location","search","params","URLSearchParams","loadString","parseLoadString","populateFromUids","specString","parseSpecString","anointmentString","parseAnointmentsString","relicsString","parseRelicsString","initialLoad","getElementById","focus","t","t_","callback","traitsToUids","partyMemberRelics","deleted","splice","limit","getMaxAnointments","confirm","seenRelics","randomRelic","randomMonster","anointmentUIDs","randomAnointmentUID","Object","keys","closeUploadBuildModal","closeInfoModal","updateAnointments","withRouter","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.5be4651b.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/ChangeLog.350505c4.md\";","import React, {PureComponent} from 'react';\n\nimport ReactMarkdown from 'react-markdown';\n\nimport md from '../markdown/ChangeLog.md';\n\nclass ChangeLog extends PureComponent {\n\n  constructor() {\n    super();\n    this.state = { markdown: '' };\n  }\n\n  componentWillMount() {\n    fetch(md).then(res => res.text()).then(text => this.setState({ markdown: text }));\n  }\n\n  render() {\n    return (\n      <section>\n        <ReactMarkdown>{this.state.markdown}</ReactMarkdown>\n      </section>\n    )\n  }\n}\n\nexport default ChangeLog;","export default __webpack_public_path__ + \"static/media/InfoSection.d28ecc31.md\";","import React, {PureComponent} from 'react';\nimport ReactMarkdown from 'react-markdown';\n\nimport md from '../markdown/InfoSection.md';\n\n/**\n * The InfoSection which resides in the InfoModal.\n * Renders markdown from markdown/InfoSection.md.\n */\nclass InfoSection extends PureComponent {\n\n  constructor() {\n    super();\n    this.state = { markdown: '' };\n  }\n\n  /**\n   * When component is mounted, retrieve the markdown.\n   * @return {void}\n   */\n  componentWillMount() {\n    fetch(md).then(res => res.text()).then(text => this.setState({ markdown: text }));\n  }\n\n  /**\n   * Render function.\n   * @return {ReactComponent} A <section> element containing the markdown.\n   */\n  render() {\n    return (\n      <section>\n        <ReactMarkdown>{this.state.markdown}</ReactMarkdown>\n      </section>\n      )\n    }\n}\n\nexport default InfoSection;","import React, {PureComponent} from 'react';\nimport ChangeLog from './ChangeLog'\nimport InfoSection from './InfoSection'\nimport Modal from 'react-modal';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faTimes } from '@fortawesome/free-solid-svg-icons'\n\nclass InfoModal extends PureComponent {\n  render() {\n    return (\n        <Modal className=\"modal-content modal-content-info\" overlayClassName=\"modal-overlay modal-overlay-info is-open\" isOpen={this.props.modalIsOpen}>\n          <div className=\"modal-header\">\n            <button id=\"close-info-modal\" className=\"modal-close\" aria-label=\"Close info\" onClick={this.props.closeModal}><FontAwesomeIcon icon={faTimes} /></button>\n          </div>\n          <div className=\"info-modal\">\n            <InfoSection/>\n            <hr/>\n            <ChangeLog/>\n          </div>\n        </Modal> \n    )\n  }\n}\n\nexport default InfoModal;","import React, {Component} from 'react';\nimport Modal from 'react-modal';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faTimes, faUpload } from '@fortawesome/free-solid-svg-icons'\n\n\n/**\n * The upload party model, which pops up when clicking the Upload Party\n * button at the top.\n * @property {String} partyString The string that the user has entered into the box.\n * @property {String} error The current error message, if any.\n */\nclass UploadPartyModal extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      partyString: \"\",\n      error: null,\n    }\n  }\n\n  /**\n   * Handle the \"upload\" of a party string.\n   * Do this by calling the function from props and checking for errors.\n   */\n  handleUploadPartyString() {\n    this.props.uploadPartyFromString(this.state.partyString, function(err) {\n      if(err) {\n        this.setState({\n          error: err.message,\n        });\n      } else {\n        this.setState( {\n          partyString: \"\",\n          error: null,\n        });\n      }\n    }.bind(this));\n  }\n\n  /**\n   * Handle the input change for the textarea.\n   * @param  {Event} e The event that sparked this function.\n   */\n  handleInputChange(e) {\n    this.setState({\n      error: null,\n      partyString: e.target.value,\n    });\n  }\n\n  /**\n   * The render function.\n   * @return {ReactComponent} The modal.\n   */\n  render() {\n    return (\n\n      <Modal className=\"modal-content modal-content-info modal-sm\" overlayClassName=\"modal-overlay modal-overlay-info is-open\" isOpen={this.props.modalIsOpen}>\n        <div className=\"modal-header\">\n          <button id=\"close-upload-party-modal\" className=\"modal-close\" onClick={this.props.closeModal}><FontAwesomeIcon icon={faTimes} /></button>\n        </div>\n        <div className=\"info-modal\">\n          <h2>Upload party</h2>\n          <p>Paste your party string into the box below and click \"upload\" to upload your party. You can get your build string in-game by going to Options and then Export Data to Clipboard.</p>\n          { this.state.error && <div className=\"notification notification-error\"><b>Error: </b>{this.state.error}</div>}\n          <textarea autoFocus id=\"upload-party-textarea\" placeholder=\"Paste party string here\" onChange={(e) => this.handleInputChange(e)} value={this.state.partyString}></textarea>\n          <button id=\"upload-party-button\" className=\"button-lg\" onClick={this.handleUploadPartyString.bind(this)}><FontAwesomeIcon icon={faUpload}/>&nbsp;Upload</button>\n        </div>\n      </Modal>\n    )\n  }\n}\n\nexport default UploadPartyModal;","import React, {PureComponent} from 'react';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faUpload, faInfoCircle, faTimes, faDice } from '@fortawesome/free-solid-svg-icons'\n\nclass AppHeader extends PureComponent {\n\n  render() {\n    return (\n      <header className=\"app-header\">\n        <div className=\"container\">\n        <div className=\"app-header-left\">\n          <h3>Siralim Planner <span className=\"version-num\">v{`${process.env.REACT_APP_VERSION}`}</span></h3>\n        </div>\n        <div className=\"app-header-right\">\n          <p><a href=\"https://docs.google.com/spreadsheets/d/1qvWwf1fNB5jN8bJ8dFGAVzC7scgDCoBO-hglwjTT4iY/edit#gid=0\" target=\"_blank\" rel=\"noreferrer\">Compendium</a> {this.props.compendiumVersion}</p>\n          <button id=\"upload-build\" className=\"lighter\" onClick={this.props.openUploadBuildModal}><FontAwesomeIcon icon={faUpload}/><span>Upload party</span></button>\n          <button id=\"reset-build\" className=\"lighter\" onClick={this.props.resetBuild}><FontAwesomeIcon icon={faTimes}/><span>Reset</span></button>\n          <button id=\"random-build\" className=\"lighter\" onClick={this.props.randomiseBuild}><FontAwesomeIcon icon={faDice}/><span>Randomise</span></button>\n          <button id=\"open-info-modal\" className=\"lighter\" onClick={this.props.openInfoModal}><FontAwesomeIcon icon={faInfoCircle}/><span>Info</span></button>\n        </div>\n        </div>\n      </header>\n    )\n  }\n}\n\nexport default AppHeader;","import React, {PureComponent} from 'react';\n\nclass AppFooter extends PureComponent {\n  render() {\n    return (\n      <footer>\n        <div className=\"container\">\n          <p>2021 Created by BeratedBert. This site is not affiliated with Thylacine Studios.</p>\n          <p>Data sourced from the <a href=\"https://docs.google.com/spreadsheets/d/1qvWwf1fNB5jN8bJ8dFGAVzC7scgDCoBO-hglwjTT4iY/edit#gid=0\" target=\"_blank\" rel=\"noreferrer\">Siralim Ultimate Compendium</a>. Creature sprites and stats sourced from the <a href=\"https://github.com/rovermicrover/siralim-ultimate-api\" target=\"_blank\" rel=\"noreferrer\">Siralim Ultimate API</a>.</p>\n          <p>Source code available on <a href=\"https://github.com/berated-bert/siralim-planner\" target=\"_blank\" rel=\"noreferrer\">GitHub</a>. Pull requests welcome!</p>\n        </div>\n      </footer>\n    )\n  }\n}\n\nexport default AppFooter;","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAABrSURBVDhPYxgI8B8Jkwz+b9iw4f/FixfJMgCuuby8nGQDhpBmZEWka57HwvL/Ah8fWDG5zgYbQJGfYa4gS3NXVuT//CAnuCEw70Ck8QO45kBLHZgmsEFQNkGArhkGiNIMAjCNRGugEmBgAAAqHok4g5BTHQAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAACBSURBVDhPrY6LDcAgCAVdQLdzwU7UjWgBUfxgNfYS0hTevdb9Dahpmd0IuEOA90pPfOc1MbsROQAxtsHZLVOHVNDao8Mq0wdTeLRbLxiNVXB5/12SZMyiw2qBjmaJumOWlZr8F12Jkq2vC33JhixUJbuyQIIe3PFpnSNZOJIXcO4BphoCLAPQr8oAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAABgSURBVDhPY6An+A/FZIH/Fx58+t+26SHJhoA1kK0ZpJEizSCN1NKMDWMFKJpB2L30LAYGqYMoRwVwPyNjdMNA6iDKUQFMAgMToxkXoFwzIT/jAui2UqSZLECRZhIBAwMAzw+wpM3b+H8AAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAABnSURBVDhPY6AW+E8mhoP/Vc2T/p+49JQoDFIL0gPRCgFgweDYXKIwXgNAND5MlAFT52/AikkyAN3fhAwAAZyGEKMZBAbeABDAMIQUzSBAsQEggKKBVM0wANdIjmYYgGkiSzORgIEBANz0XZxQ5MfNAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAACVSURBVDhPrZDLEYAwCERztFNr82whluHdBqJLIAFJjL+d2QOwvHzCX4odXyrGZSxeZ+ujh0yKtkWhbRrqoBsQCViQgvCsKnMqajGBBNK5RfNU3UNN6YbsH4gVEDVyKe4lw2zzBDbPnNyJ6OW+AqiZk32CCueaZ+jRRkU0dH8hywztQSAJFKAsP4BoGeAbwFmflpVC2AGO+1AuRQifMwAAAABJRU5ErkJggg==\"","import icon_nature  from '../icons/nature.png'\nimport icon_chaos   from '../icons/chaos.png'\nimport icon_sorcery from '../icons/sorcery.png'\nimport icon_death   from '../icons/death.png'\nimport icon_life    from '../icons/life.png'\n\n/**\n * Simple function to convert to Title Case.\n * Found here: https://stackoverflow.com/questions/196972/convert-string-to-title-case-with-javascript\n * @param  {String} str The string to convert to title case.\n * @return {String}     The string that has been convered to title case.\n */\nfunction toTitleCase(str) {\n  return str.replace(\n    /\\w\\S*/g,\n    function(txt) {\n      return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();\n    }\n  );\n}\n\n// A simple function to render a monster class icon.\n// It knows which icon to render via props.icon.\nfunction MonsterClassIcon(props) {\n  let pi = props.icon.toLowerCase();\n  let icon;\n  if(pi === \"nature\") icon = icon_nature;\n  if(pi === \"chaos\")  icon = icon_chaos;\n  if(pi === \"sorcery\") icon = icon_sorcery;\n  if(pi === \"death\") icon = icon_death;\n  if(pi === \"life\") icon = icon_life;\n\n  return (\n    <span className=\"cls-icon\">{icon && <img title={toTitleCase(pi)} src={icon} className=\"class-icon\" alt={\"class-\" + pi}/>}</span>\n  )\n}\n\nexport default MonsterClassIcon;","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAHYcAAB2HAY/l8WUAAADaSURBVDhPnY+vEkFhEMVvUjRF0yTB7ZI3MBIvYEYgaaKiyeINou4NNK+0/Hbt53Ov67ucmTOzc/ac/ZMlIE/+BVkWfSW1Sc0hs0NX1qeBkhrNWmloYLLryOY8VFI3HSLjVVtJcH8dKaldx2PWKnSLb/chHvYr6i4JGxZFT83lFyA995GxqCFMp+nB+AVIr+6K0GCTb4mDkF7tAAycmHrB3yBjUYPk01bY5MFPL0C8ZCz6wtsQag+WdbwWqUINbtpecmVZx/gNbgovxNqDjSHH21xJbdLvSISz7A7eQgMqQbAHmgAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAHYcAAB2HAY/l8WUAAABvSURBVDhPnY6BCcAwCARDBsjqXa0bpXmoYNXXpAdCRO9NK5hv/WLeY8yrdwnRVeJk9EFgiFtmPd4QNHRZ9+oXjlLOAkJhVwapsCUzwc4gWFKhkgEVbBiWLXaBhq0KoXLQU2R4fN3yuX4qC1oo5NYeV47XQ9j3i0wAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAHYcAAB2HAY/l8WUAAACISURBVDhPtY/RDYAgDETZjolcAfdhDxNG0D+/WaDSKoQiFsH4kouk12ur+hu4NATMeiHh+yz1MTwgBsCajZTXgkTSVgzuzpPw/faazwOQ2ERBVF4LahKbalubA0BPKVAOyL0qZBp7Ozmp8Bg0HRvc6umbXyJ4DCo+bJE8hvSfkseQGprhTpQ6AD/SwQsx8BX/AAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAHYcAAB2HAY/l8WUAAACtSURBVDhPjVHBDcQgDGMpvt3hlqh0C7FUh+KUC64TX07FklUabCdAq9FnzS30eZ5jjnElWm0jhN1iCM1giT6P452EZlQzNT+QgNe8J7A16o8BRu2Mf+wXAfnMFJFWwz7Db7gAnb5jrxrCYDSyQYJPgaAYqLXCbPAuGqRGaJZJ4eeFyL5xjf0lVvAiKYoGD8EkXkvgRcaucY3j/Akw5NdQPpgBPp9ywwyYsKKitQ8BaTkO0EhcpwAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAHYcAAB2HAY/l8WUAAACXSURBVDhPnU/bDcNACLvPbNrZ8p1BOkb/swCNUYwcyj1USxYnsM3RFmB3/QtmnwMByyEq7Jm7Ydlg9n7ZuW/P3uRHbkKtKLMhXITNSvYhqMBBmLFNmUKod8RdFEXA1XdKAPt4XwyEEO9RQARVIWQECGm8CbD+IEKU7EMwgm9DrSizEvku35xM5e2KPKgMXXPGdNsKJubWvk+t9fHt6TV2AAAAAElFTkSuQmCC\"","import React, {Component, PureComponent} from 'react';\nimport _ from 'underscore';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\n\nimport icon_attack  from '../icons/attack.png'\nimport icon_health  from '../icons/health.png'\nimport icon_intelligence from '../icons/intelligence.png'\nimport icon_defense   from '../icons/defense.png'\nimport icon_speed    from '../icons/speed.png'\n\nimport { faCheck } from '@fortawesome/free-solid-svg-icons'\nimport { faTimes } from '@fortawesome/free-solid-svg-icons'\nimport { faCaretUp } from '@fortawesome/free-solid-svg-icons'\nimport { faSortAlphaDown } from '@fortawesome/free-solid-svg-icons'\nimport { faSortAlphaDownAlt } from '@fortawesome/free-solid-svg-icons'\nimport { faSortNumericDown } from '@fortawesome/free-solid-svg-icons'\nimport { faSortNumericDownAlt } from '@fortawesome/free-solid-svg-icons'\n\nimport MonsterClassIcon from './MonsterClassIcon'\n\nconst metadata = require('../data/metadata');\n\nconst MONSTERS_PER_PAGE = 120;\n\n// A single field in the header of the Monster Selection table.\nclass HeaderField extends PureComponent {\n\n  // For stats, render a stat icon according to their value.\n  renderStatIcon(stat) {\n    let icon = \"\";\n\n    if(stat === \"stats.health\") icon = icon_health;\n    if(stat === \"stats.attack\")  icon = icon_attack;\n    if(stat === \"stats.intelligence\") icon = icon_intelligence;\n    if(stat === \"stats.defense\") icon = icon_defense;\n    if(stat === \"stats.speed\") icon = icon_speed;\n    \n    return (<img src={icon} className=\"class-icon\" alt={\"stat-\" + stat}/>);\n  }\n\n  // Render a sort button when sortOrder is not null.\n  renderSortButton() {\n    let icon = faCaretUp;\n    switch(this.props.sortOrder) {\n      case 'asc':\n        icon = this.props.type === \"numeric\" ? faSortNumericDownAlt : faSortAlphaDownAlt;\n        break;        \n      case 'desc':\n        icon = this.props.type === \"numeric\" ? faSortNumericDown : faSortAlphaDown;\n        break;\n      default:\n        return \"\";\n    }\n    return <FontAwesomeIcon icon={icon}/>;\n  }\n\n  render() {\n    return (\n      <div className={(\"monster-row-\" + this.props.class_name) + (this.props.sortable ? \" sortable\" : \"\")}\n       onClick={() => { if(this.props.sortable) this.props.updateSortField(this.props.sort_name)} }\n      >\n        {this.props.sort_name.startsWith('stats') ? this.renderStatIcon(this.props.sort_name) : this.props.field_name}\n        {\n          this.props.sortable &&\n          <span className=\"sort-button\">\n            { this.renderSortButton() }\n          </span>\n        }\n      </div>\n    )\n  }\n}\n\n// The header of the monster table (on the monster selection window).\nclass MonsterSelectionRowHeader extends PureComponent {\n\n  render() {\n\n    const fields = [\n      {sort_name: \"\", class_name: \"in-party\", field_name: \"\", not_sortable: true},\n      {sort_name: \"class\", type: \"alpha\", class_name: \"class\", field_name: \"Class\"},\n      {sort_name: \"family\", type: \"alpha\",class_name: \"family\", field_name: \"Family\"},\n      {sort_name: \"creature\", type: \"alpha\", class_name: \"creature\", field_name: \"Creature\"},\n      {sort_name: \"trait_name\", type: \"alpha\", class_name: \"trait_name\", field_name: \"Trait\"},\n      {sort_name: \"trait_description\", type: \"alpha\", class_name: \"trait_description\", field_name: \"Trait Description\"},\n      {sort_name: \"stats.health\", type: \"numeric\", class_name: \"stat\", field_name: \"H\"},\n      {sort_name: \"stats.attack\", type: \"numeric\", class_name: \"stat\", field_name: \"A\"},\n      {sort_name: \"stats.intelligence\", type: \"numeric\", class_name: \"stat\", field_name: \"I\"},\n      {sort_name: \"stats.defense\", type: \"numeric\", class_name: \"stat\", field_name: \"D\"},\n      {sort_name: \"stats.speed\", type: \"numeric\", class_name: \"stat\", field_name: \"S\"},\n      {sort_name: \"material_name\", type: \"alpha\", class_name: \"material_name\", field_name: \"Material Name\"}\n    ]\n\n    return (\n      <div className={\"monster-selection-row monster-row-header detailed\" + (this.props.sortField ? \" sorted\" : \"\")}>\n        { fields.map((field, i) => \n          <HeaderField key={i}\n                       sort_name={field.sort_name}\n                       class_name={field.class_name}\n                       field_name={field.field_name}\n                       sortable={!field.not_sortable}\n                       type={field.type}\n                       sortOrder={field.sort_name === this.props.sortField ? this.props.sortOrder : null}\n                       updateSortField={this.props.updateSortField}\n                       />\n        )}      \n            \n      </div>\n    )\n  }\n}\n\n\n\n// A single stat in the MonsterSelection table, colourised based on how high it is with\n// respect to the stats of other monsters.\nclass MonsterStat extends PureComponent {\n\n  // Colour the background according to the stat's value with respect to the stats of\n  // the other monsters.\n  // This is determined via the metadata.\n  getStatBackground() {\n    const stat = this.props.stat;\n    const value = this.props.value;\n\n    const avgStat = metadata.average_stats[stat.toLowerCase()];\n    const minStat = metadata.min_stats[stat.toLowerCase()];\n    const maxStat = metadata.max_stats[stat.toLowerCase()];\n\n    let colour = 'rgba(0, 0, 0, ';\n    let positive = 0;\n    if(value > avgStat) positive = 1;\n    else if (value < avgStat) positive = -1;\n\n    let opacity = 0;\n    if(positive > 0) opacity = (value - avgStat) / (maxStat - avgStat);\n    else if(positive < 0) opacity = (avgStat - value) / (avgStat - minStat);\n\n    if(positive > 0) colour = 'rgba(0, 235, 16, ';\n    else if(positive < 0) colour = 'rgba(252, 19, 3, ';\n    return {'background': colour + (opacity * 0.75) + ')'}\n  }\n\n  render() {\n\n    return (\n      <div className={\"monster-row-stat \"}>\n        <span className=\"mobile-only ib\"><b>{this.props.stat}:&nbsp;</b></span>\n        <span className=\"stat-value\" style={this.getStatBackground()}>{this.props.value || \"-\"}</span>        \n      </div>\n    )\n  }\n}\n\n\n// A fragment of all stats of a particular monster in the MonsterSelection table.\nclass MonsterStats extends PureComponent {\n\n  render() {\n    const stats = ['Health', 'Attack', 'Intelligence', 'Defense', 'Speed'];\n    return (\n      <React.Fragment>\n        {stats.map((stat, i) => \n          <MonsterStat key={i} stat={stat} value={this.props[stat.toLowerCase()]} />\n        )}\n      </React.Fragment>\n    )\n  }\n}\n\nclass MonsterSelectionRow extends Component {\n\n  // A function for rendering a particular class (cls). \n  // It will render an icon if the class is one of the 5 classes in the game,\n  // otherwise it will render the full name of the class (e.g. \"Rodian Master\").\n  renderClass(cls, fullName) {\n    let c = this.props.class.toLowerCase();\n    let iconedClass = c === \"nature\" || c === \"chaos\" || c === \"death\" || c === \"sorcery\" || c === \"life\";\n\n    return (\n      <div className={\"cls-container\" + (!fullName ? \" center\" : \"\")}>\n        { iconedClass && <MonsterClassIcon icon={this.props.class} /> }\n        <span className={\"cls-full-name col-cls-\" + cls.toLowerCase()}>{this.props.class}</span>\n      </div>\n    )\n  }\n\n  render() {\n    return (\n      <div className={\"monster-selection-row\" + (this.props.inParty ? \" in-party\" : \"\")}>\n        <div className=\"monster-row-in-party\">\n          { this.props.inParty && <span className=\"green-tick\"><FontAwesomeIcon icon={faCheck}/></span>}\n        </div>\n\n        <div className=\"monster-row-class\">\n          <span className=\"mobile-only ib\"><b>Class:&nbsp;&nbsp;</b></span>{this.renderClass(this.props.class, this.props.renderFullRow)}\n        </div>\n        <div className=\"monster-row-family\">\n          <span className=\"mobile-only ib\"><b>Family:&nbsp;</b></span>{this.props.family}\n        </div>\n        <div className=\"monster-row-creature\">\n          <span className=\"mobile-only ib\"><b>Creature:&nbsp;</b></span>{this.props.creature}\n        </div>\n        <div className=\"monster-row-trait_name\">\n          <span className=\"mobile-only ib\"><b>Trait name:&nbsp;</b></span>{this.props.trait_name}\n        </div>\n        <div className={\"monster-row-trait_description\"}>\n          <span className=\"mobile-only ib\"><b>Trait description:&nbsp;</b></span>{this.props.trait_description}        \n        </div>\n\n        <MonsterStats {...this.props.stats}/>\n\n        <div className=\"monster-row-material_name\">\n          {this.props.material_name}\n        </div>\n      </div>\n    );\n  }\n}\n\n\n\n\n\n\n\n/**\n * A simple function that returns the family of a creature, or the class + ' traits' in the case that\n * the family is not present (as is the case for backer traits).\n * This is used for the page names on the Monster Selection window.\n * @param  {Object} m A monster object, which has a name, family, class etc.\n * @return {String}   The semantic name of the family for the page tab.\n */\nfunction getPageFamily(m) {\n  return m.family ? m.family : m.class + \" traits\"; // Exception for Backer traits\n}\n\n/**\n * Get the 'semantic name' of a monster, for the top of the Monster Selection window.\n * i.e. \"Abomination / Brute\".\n * @param  {Object} m A monster object, which has a name, family, class etc. \n * @return {String}   A string representing the semantic name of the monster.\n */\nfunction getMonsterSemanticName(m) {\n  return m.family ? (m.family + \" / \" + m.creature) : (m.class + \" (\" + m.trait_name + \")\");\n}\n\n\n/**\n * The Monster Selection modal, i.e. the window that contains a list of all monsters/traits in\n * Siralim Ultimate.\n * @property {Array} state.filteredItems An array of items from props.items that have been filtered\n *                                       according to the current search term.\n * @property {Array} state.filteredItemGroups An array of item group objects, representing the start and\n *                                      end index of each page.\n * @property {Integer} state.currentPage The index of the current page that the user is on.\n * @property {String} state.currentSearchTerm The current search term, i.e. what is in the search box.\n * @property {String} state.appliedSearchTerm The *applied* search term, which is applied 0.5s after the user finishes\n *                                      typing something into the search box.\n * @property {String} state.sortField The current field to sort by, e.g. \"Class\".                                \n * @property {String} state.sortOrder The current sort order, i.e. null, 'asc', 'desc'.   \n * @property {Timeout} searchTimeout A timeout that takes place after the user stops typing in the search box.\n * @property {Ref}  tableRef  A reference of the monster table, so that it can be used to scroll back\n *                            to the top when switching between pages.\n */\nclass MonsterSelectionModal extends PureComponent {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      filteredItems: [], \n      filteredItemGroups: [{\"start\": 0, \"end\": 0}],\n      currentPage: 0,\n      currentSearchTerm: \"\",\n      appliedSearchTerm: \"\",\n      sortField: null,\n      sortOrder: null,\n    }\n    this.searchTimeout = null;\n    this.tableRef = React.createRef();\n  }\n\n\n\n  /**\n   * When the component is mounted, filter the results and set this.state accordingly.\n   */\n  componentDidMount() {\n    this.filterResults(); // Build this.state.filteredItems\n  }\n\n\n  /**\n   * A terribly written function that basically puts all of the monsters into particular groups.\n   * This is for pagination.\n   * The result is a list of monster groups, for example:\n   * {start: 0, end: 120, familyStart: \"Abomination\", familyEnd: \"Basilisk\"} means that\n   * monster #0 to monster #120 belong on the first page. The first family is Abomination,\n   * and the last family is Basilisk.\n   *\n   * Rather than using fixed page size (i.e. 100), this function ensures that the families\n   * are not split onto separate pages, i.e. there might be 102 on a page so that\n   * one of the families is not split onto two separate pages.\n   * \n   * This function is super awkward and needs rewriting, but it works for now.\n   * @param  {Array} items The list of items (i.e. the list of all monsters/traits).\n   * @return {Array}       An array of Objects, where each represents the start, end, familyStart and familyEnd,\n   *                       for example {0, 50, \"Amaranth\", \"Amphisbeana\"}\n   */\n  getItemGroups(items) {  \n    let itemGroups = [];\n    let currentGroup = {\"start\": 0, \"end\": null, \"familyStart\": null, \"familyEnd\": null}\n    let monstersInCurrentGroup = [];\n    for(let i = 0; i < items.length; i++) {\n      let m = items[i];\n      //let m = item.monster;\n      let f = getPageFamily(m)\n\n      if(!currentGroup.familyStart) currentGroup.familyStart = f;\n      monstersInCurrentGroup.push(m);\n      if((monstersInCurrentGroup.length > MONSTERS_PER_PAGE) && \n          (f !== getPageFamily(monstersInCurrentGroup[Math.max(0, monstersInCurrentGroup.length - 2)]))) {\n        currentGroup.end = i;\n        currentGroup.familyEnd = getPageFamily(monstersInCurrentGroup[Math.max(0, monstersInCurrentGroup.length - 2)]);\n        itemGroups.push(currentGroup);\n        currentGroup = {\"start\": i, \"end\": null, \"familyStart\": f, \"familyEnd\": null}\n        monstersInCurrentGroup = [];\n      }\n    }\n\n    // Catch the last group as well.\n    if(monstersInCurrentGroup.length > 0) {\n      let i = items.length - 1;\n\n      currentGroup.end = i + 1;\n      currentGroup.familyEnd = getPageFamily(monstersInCurrentGroup[Math.max(0, monstersInCurrentGroup.length - 1)]);\n\n      itemGroups.push(currentGroup);\n    }\n\n    return itemGroups;\n  }\n\n  /**\n   * A function that sets the currentSearchTerm to the value the user has typed in the search box.\n   * 0.5s after the user has stopped typing, apply the search term.\n   * @param  {Event} e The event that sparked the search change.\n   */\n  handleSearchChange(e) {\n    window.clearTimeout(this.searchTimeout);\n    this.setState({\n      currentSearchTerm: e.target.value,\n    }, () => {\n      this.searchTimeout = window.setTimeout( () => this.applySearchTerm(), 500);\n    });\n  }\n\n\n  /**\n   * Sort the results of filteredItems based on the current sort field and sort order.\n   * @param  {Array} filteredItems A list of items that have been filtered.\n   * @return {Array}               The sorted filtered items.\n   */\n  sortResults(filteredItems) {\n    const field = this.state.sortField;\n    const order = this.state.sortOrder;\n\n    function compare(a, b) {\n      const sf = field.split('.')\n      let af = _.get(a, sf, -1);\n      let bf = _.get(b, sf, -1);\n      if(af === '') af = \"zzzzzzz\"; // For empty strings (backer traits etc), treat them as if they were zzzz, e.g. last\n      if(bf === '') bf = \"zzzzzzz\";\n\n      if( af < bf ) return order === \"asc\" ? 1 : -1;\n      if( af > bf ) return order === \"asc\" ? -1 : 1;\n      return 0;\n    }\n\n    // Sort the filteredItems if sortField is not null\n    if(this.state.sortField) return filteredItems.sort((a, b) => compare(a, b));\n    return filteredItems;\n  }\n  \n\n  /**\n   * Filter items by applying the current search term to this.props.items.\n   * Afterwards, set this.state accordingly and scroll to the top of the table.\n   */\n  filterResults() {\n    let searchTerm = this.state.currentSearchTerm.toLowerCase();\n    let filteredItems = [];\n    const items = this.props.items;\n    for(let item of items) {\n      let searchText = item.search_text;\n      if(searchText.toLowerCase().indexOf(searchTerm) !== -1) {\n        filteredItems.push(item);\n      }      \n    }\n    const sortedFilteredItems = this.sortResults(filteredItems);\n    const filteredItemGroups = this.getItemGroups(sortedFilteredItems);\n\n    this.setState({\n      currentPage: 0,\n      filteredItems: sortedFilteredItems,\n      filteredItemGroups: filteredItemGroups\n    }, () => { this.tableRef.current.scrollTo(0, 0) }) // Scroll to top of table once complete.\n  }\n\n\n  /**\n   * Apply the search term and filter the results accordingly.\n   */\n  applySearchTerm() {\n    this.setState({\n      appliedSearchTerm: this.state.currentSearchTerm\n    }, () => this.filterResults())\n  }\n\n  /**\n   * A function to render the results count.\n   * The output depends on whether *all* results are being shown,\n   * or a filtered list.\n   * @return {ReactComponent} A span that contains a count of the search results.\n   */\n  renderResultsCount() {   \n\n    let r =  <span><b>{this.state.filteredItems.length}</b> of <b>{this.props.items.length}</b> results</span>;\n    if(this.state.filteredItems.length === this.props.items.length) {\n      r = <span>all <b>{this.props.items.length}</b> results</span>\n    }\n    let f = \"\";\n    if(this.state.appliedSearchTerm) {\n      f = \" matching the current search term\";\n    }\n                \n    return (\n      <span>Displaying {r}{f}.</span>\n    )\n  }\n\n\n  /**\n   * Go to a particular page, i.e. set currentPage = pageNum.\n   * Scroll to top of table once complete.\n   * @param  {Integer} pageNum The index of the page to go to.\n   */\n  goToPage(pageNum) {\n    this.setState({\n      currentPage: pageNum,\n    }, () => { this.tableRef.current.scrollTo(0, 0) })\n  }\n\n\n  updateSortField(sortField) {\n    this.setState({\n      sortField: (sortField === this.state.sortField && this.state.sortOrder === \"asc\") ? null : sortField,\n      sortOrder: \n        this.state.sortField === sortField ? (\n          this.state.sortOrder === \"desc\" ? \"asc\" :\n          (\n            this.state.sortOrder === \"asc\" ? null : \"desc\"\n          )\n        ) : \"desc\"      \n    }, () => this.filterResults())\n  }\n\n\n  /**\n   * Render the name of a page given the index of the page and the itemGroup.\n   * @param  {Integer} i         The page number.\n   * @param  {Object} itemGroup A single itemGroup.\n   * @return {String}           The page name, e.g. \"Amaranth - Amphisbeana\" or \"31 - 36\".\n   */\n  renderPageName(i, itemGroup) {\n    let pageStart = \"\";\n    let pageEnd = \"\";\n\n    let sf = this.state.sortField ? this.state.sortField.split('.') : \"family\";\n    if(!this.state.filteredItems[this.state.filteredItemGroups[i].start]) pageStart = \"(unknown)\";\n    else {\n      pageStart = String(_.get(this.state.filteredItems[this.state.filteredItemGroups[i].start], sf, \"(empty)\"));\n      if(pageStart.length > 8) pageStart = pageStart.slice(0, 7) + \"...\"\n    }\n\n    if(!this.state.filteredItems[this.state.filteredItemGroups[i].end - 1]) pageEnd = \"(unknown)\";\n    else {\n      pageEnd = String(_.get(this.state.filteredItems[this.state.filteredItemGroups[i].end - 1], sf, \"(empty)\"));\n      if(pageEnd.length > 8) pageEnd = pageEnd.slice(0, 7) + \"...\"\n    }\n\n    return pageStart + \" - \" + pageEnd;                        \n  }\n\n  /**\n   * The render function\n   * @return {ReactComponent} The modal content div.\n   */\n  render() {\n\n\n    // Get the start and end index via this.state.filteredItemGroups.\n    let startIndex = this.state.filteredItemGroups[this.state.currentPage] ? this.state.filteredItemGroups[this.state.currentPage].start : 0;\n    let endIndex = this.state.filteredItemGroups[this.state.currentPage] ? this.state.filteredItemGroups[this.state.currentPage].end : 0;\n\n    let slot = (this.props.currentTraitSlotId) === 0 ? \"primary\" : ((this.props.currentTraitSlotId === 2) ? \"secondary\" : \"artifact\");\n    let slot_n = slot === \"artifact\" ? \"n\" : \"\";\n    let currentMonster = !_.isEmpty(this.props.currentSelectedMonster) ? getMonsterSemanticName(this.props.currentSelectedMonster) : null;\n\n\n    return (\n        <div className=\"modal-content\">\n          <div className=\"modal-header\">\n            <h3>Select a{slot_n} <b>{slot}</b> trait for party member <b>{this.props.currentPartyMemberId + 1}</b>. <span style={{'marginLeft': '20px'}}>{currentMonster && (\"Current: \" + currentMonster)}</span></h3>\n            <button id=\"close-modal\" className=\"modal-close\" aria-label=\"Close trait selection\" onClick={this.props.closeModal}><FontAwesomeIcon icon={faTimes} /></button>\n          \n          </div>\n\n          <div className=\"monster-selection-modal\">\n            <div className=\"monster-selection-controls\">\n              <div className=\"monster-selection-search-tools\">\n                <input id=\"monster-search\" className=\"monster-search\" autoFocus type=\"text\" placeholder=\"Search monsters/traits...\" onChange={(e) => this.handleSearchChange(e)} value={this.state.currentSearchTerm} />\n              </div>                \n             <div className=\"monster-selection-pagination\">\n                {this.state.filteredItemGroups.map((itemGroup, i) =>\n                    <div role=\"button\" key={i} onClick={() => this.goToPage(i)} className={\"tab\" + (this.state.currentPage === i ? \" active\" : \"\")}>\n                      {this.renderPageName(i, itemGroup)}\n                    </div>\n                )}\n              </div>\n              <div className=\"mobile-hidden monster-row-container monster-row-container-selection monster-row-container-header\">\n                <MonsterSelectionRowHeader sortField={this.state.sortField} sortOrder={this.state.sortOrder} updateSortField={this.updateSortField.bind(this)} /> \n              </div> \n            </div>\n\n            <div className=\"monster-selection-table monster-list\" ref={this.tableRef}>\n                {this.state.filteredItems.slice(startIndex, endIndex).map((monsterRow, i) =>                 \n                  <div className={\"monster-row-container monster-row-container-selection selectable\" + \n                    ((monsterRow && this.props.currentSelectedMonster && (monsterRow.uid === this.props.currentSelectedMonster.uid)) ? \" currently-selected-monster\" : \"\")}\n                    key={i}\n                    onMouseUp={() => this.props.updatePartyMember(monsterRow)}>\n                    <MonsterSelectionRow {...monsterRow} \n                    renderFullRow={true}\n                    searchTerm={this.state.currentSearchTerm}\n                    inParty={this.props.monstersInParty.has(monsterRow.uid)}\n                    /> \n                  </div>\n                )}              \n            </div>\n            <div className=\"monster-selection-results-count\">\n               { this.renderResultsCount() }\n            </div>\n          </div>\n        </div>\n    )\n  }\n}\n\nexport default MonsterSelectionModal;","import _ from 'underscore';\n/**\n * \n * Check this row for errors. Return the error in the form of a string if present, else return null.\n * @param {Object} monster The monster to check.\n * @param {Integer} traitSlotIndex The trait slot index to check (0, 1, or 2).\n * @return {String} The error message, if any.\n */\nfunction getTraitErrors(monster, traitSlotIndex) {\n  if(_.isEmpty(monster)) return null;\n  if(!(traitSlotIndex === 2) && \n    (monster.class === \"Rodian Master\" || monster.class === \"Nether Boss\" || monster.class === \"Backer\" || monster.class === \"Pandemonium\"))\n      return \"This trait cannot be found on a playable creature and cannot be placed in a creature slot.\";\n  if(traitSlotIndex === 2 && \n    (monster.material_name === \"N/A\" || monster.material_name === \"No Material Exists\")) \n      return \"This trait has no material and cannot be placed in the trait slot.\";\n  return null;\n}\n\nexport default getTraitErrors;","import React, {Component, PureComponent} from 'react';\nimport Modal from 'react-modal';\nimport _ from 'underscore';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\n\nimport { faTimes } from '@fortawesome/free-solid-svg-icons'\nimport { faExclamationTriangle } from '@fortawesome/free-solid-svg-icons'\nimport { faCheck } from '@fortawesome/free-solid-svg-icons'\nimport { faSave } from '@fortawesome/free-solid-svg-icons'\n\nimport icon_attack  from '../icons/attack.png'\nimport icon_health  from '../icons/health.png'\nimport icon_intelligence from '../icons/intelligence.png'\nimport icon_defense   from '../icons/defense.png'\nimport icon_speed    from '../icons/speed.png'\n\nimport MonsterClassIcon from './MonsterClassIcon'\nimport getTraitErrors from '../functions/getTraitErrors';\n\n/**\n * A class that corresponds to a single MonsterRow from within the Monster Planning window\n * (i.e. the 6 creatures with 3 traits each) of the Monster Selection page.\n */\nclass MonsterPlannerRow extends Component {\n\n  /**\n   * A function for rendering a particular class (cls).\n   * It will render an icon if the class is one of the 5 classes in the game,\n   * otherwise it will render the full name of the class (e.g. \"Rodian Master\").\n   * @param  {String} cls      The name of the class.\n   * @return {React.Fragment}          The name of the class plus the icon.\n   */\n  renderClass(cls) {\n    let c = this.props.monster.class.toLowerCase();\n    let iconedClass = c === \"nature\" || c === \"chaos\" || c === \"death\" || c === \"sorcery\" || c === \"life\";\n\n    return (\n      <React.Fragment> \n        { iconedClass && <MonsterClassIcon icon={this.props.monster.class} /> }\n      </React.Fragment>\n    )\n  }\n\n\n  /**\n   * The render function.\n   * @return {React.Fragment} A row representing a trait.\n   */\n  render() {\n    var m = this.props.monster;\n\n    return (\n      <React.Fragment>\n        <div className=\"trait-slot-class\">\n          <span className=\"mobile-only ib\"><b>Class:&nbsp;&nbsp;</b></span>{this.renderClass(m.class)}\n        </div>\n        <div className=\"trait-slot-creature\">\n          <span className=\"mobile-only ib\"><b>Creature:&nbsp;</b></span>{m.creature}\n        </div>\n        <div className=\"trait-slot-trait_name\">\n          <span className=\"mobile-only ib\"><b>Trait name:&nbsp;</b></span>{m.trait_name}\n        </div>\n        <div className={\"trait-slot-trait_description\"}>\n          <span className=\"mobile-only ib\"><b>Trait description:&nbsp;</b></span>{m.trait_description}\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\n/**\n * A component that renders the creature sprite.\n */\nclass MonsterPlannerCreatureSprite extends PureComponent {\n\n  /**\n   * The render function\n   * @return {ReactComponent} A creature sprite container with the creature sprite inside.\n   */\n  render() {\n    return (\n      <div className={\"creature-sprite-container\" + (this.props.sprite_filename ? \"\" : \" empty\")}>\n        { this.props.sprite_filename &&\n          <div className=\"creature-sprite\" style={{\"backgroundImage\": \"url(/siralim-planner/suapi-battle-sprites/\" + this.props.sprite_filename + \")\"}}></div>\n        }\n      </div>\n    );\n  }\n}\n\n\n/**\n * A trait slot on the Monster Planner interface.\n * This provides the functionality for dragging and dropping as well as row validation.\n * @property {Boolean} state.justUpdated Whether this component was recently updated (for highlighting).\n * @property {Timeout} justUpdatedTimeout A timeout to keep track of when this component should consider \n *                                        itself no longer just updated.\n */\nclass MonsterPlannerTraitSlot extends PureComponent {\n\n  /**\n   * The constructor\n   * @param  {Object} props The props.\n   */\n  constructor(props) {\n    super(props);\n    this.state = {\n      justUpdated: false, // set to true when the component has just been updated\n                          // (so that the row flashes, providing some nice visual feedback)\n    }\n    this.justUpdatedTimeout = null;\n  }\n\n  // If this component updated, set 'justUpdated' to true so that the row flashes for a second.\n  \n  /**\n   * If this component updated, set 'justUpdated' to true so that the row flashes for a second.\n   * @param  {Object} prevProps The previous props.\n   * @param  {Object} prevState The previous state.\n   */\n  componentDidUpdate(prevProps, prevState) {\n    if(!this.state.justUpdated && !_.isEqual(prevProps.monster, this.props.monster)) this.setJustUpdated();\n  }\n\n  /**\n   * Set just updated to true. When done, create a timeout to set justUpdated to false again after 1s.\n   */\n  setJustUpdated() {\n    this.setState({\n      justUpdated: true\n    }, () => {\n      window.clearTimeout(this.justUpdatedTimeout);\n      this.justUpdatedTimeout = window.setTimeout( () => this.clearJustUpdated(), 1000);\n    })\n  }\n\n  /**\n   * Set state.justUpdated to false.\n   */\n  clearJustUpdated() {\n    this.setState({\n      justUpdated: false,\n    })\n  }\n\n  /**\n   * Return true if this row is empty (i.e. it corresponds to a monster), else false.\n   * @return {Boolean} Whether the row is empty or not.\n   */\n  isEmptyRow() {\n    return _.isEmpty(this.props.monster);\n  }\n\n  /**\n   * A special function for rendering an empty row.\n   * If there was an error (such as the monster no longer existing after uploading), print that error to the row.\n   * Note that this error is different from the output of getTraitErrors - it is a parsing-related error such\n   * as the buildString containing a creature that no longer exists or has changed.\n   * @return {ReactComponent} A div representing an empty row.\n   */\n  renderEmptyRow() {\n    return (\n      <div className=\"empty-row\">\n        { this.props.error && <span className=\"trait-slot-error\"><FontAwesomeIcon icon={faExclamationTriangle} />Error: {this.props.error}. </span>}\n        {\"Click to add a\" + (this.props.traitSlotIndex === 0 ? \" primary trait\" : (this.props.traitSlotIndex === 1 ? \" fused trait\" : \"n artifact trait\"))}\n      </div>\n    )\n  }\n\n  /**\n   * The render function.\n   * @return {ReactComponent} A div representing a trait slot.\n   */\n  render() {\n\n    const rowErrors = getTraitErrors(this.props.monster, this.props.traitSlotIndex);\n    const emptyRow = this.isEmptyRow();\n\n    let rowClass = \"\";\n    // If this monster has a class, set rowClass accordingly.\n    // This allows the row to be coloured according to the creature's class.\n    if(this.props.monster.class) {\n      rowClass = \" cls-\" + this.props.monster.class.toLowerCase();\n      if(this.props.traitSlotIndex === 2) rowClass = \" cls-trait\";\n    } else {\n      rowClass = \" cls-empty\";\n    }\n\n    return (\n    <div className=\"trait-slot\">\n\n      <div\n        className={\"trait-slot-clickable\" + \n          (this.props.draggable ? \" draggable\": \"\") + \n          (rowErrors ? \" invalid-row\" : \"\") + \n          (this.props.traitSlotIndex === 2 ? \" artifact-slot\" : \"\") +\n          (this.state.justUpdated ? \" just-updated\": \"\") + \n          rowClass\n        }\n        draggable={this.props.draggable}\n        onDragStart={this.props.onDragStart()}\n        onDragOver={this.props.onDragOver()}\n        onDrop={this.props.onDrop()}\n\n        onMouseUp={ this.props.onMouseUp}\n\n        title={rowErrors }\n      >\n      { emptyRow ? this.renderEmptyRow() :\n        <MonsterPlannerRow monster={this.props.monster} error={this.props.error} />   \n      }\n\n      </div>\n      <div className=\"trait-slot-controls\">\n        { !emptyRow && <button id={\"remove-trait-\" + (this.props.traitSlotIndex + 1)} className=\"delete-button\" aria-label=\"Delete trait\" onClick={this.props.clearPartyMember}><FontAwesomeIcon icon={faTimes} /></button>}\n      </div>\n    </div>\n    )\n  }\n}\n\n\n/**\n * A component representing the class of a creature, to be rendered in the monster profile.\n */\nclass MonsterPlannerCreatureClass extends PureComponent {\n\n  /**\n   * The render function.\n   * @return {ReactComponent} A div representing the creature class.\n   */\n  render() {\n    const monsterClass = this.props.monsterClass;\n    return (\n      <div className=\"party-member-class\">\n        { monsterClass !== \"empty\" && <React.Fragment>\n            <MonsterClassIcon icon={monsterClass}/>\n            {monsterClass}\n          </React.Fragment>\n           }\n        { monsterClass === \"empty\" && \"\" }\n      </div>\n    )\n  }\n}\n\n\n/**\n * A component that shows the stats of a creature, to be rendered in the monster profile.\n */\nclass MonsterPlannerCreatureStats extends PureComponent {\n\n  /**\n   * The render function.\n   * @return {ReactComponent} A div containing the monster's stats.\n   */\n  render() {\n    let stats = {\n      health: \"--\",\n      attack: \"--\",\n      intelligence: \"--\",\n      defense: \"--\",\n      speed: \"--\"\n    }\n    const m1 = this.props.monster_1.stats;\n    const m2 = this.props.monster_2.stats;\n\n    if(m1 && !m2) {\n      stats.health = m1.health;\n      stats.attack = m1.attack;\n      stats.intelligence = m1.intelligence;\n      stats.defense = m1.defense;\n      stats.speed = m1.speed;\n    }\n    else if(m1 && m2) {\n      stats.health = Math.floor((m1.health + m2.health) / 2);\n      stats.attack = Math.floor((m1.attack + m2.attack) / 2);\n      stats.intelligence = Math.floor((m1.intelligence + m2.intelligence) / 2);\n      stats.defense = Math.floor((m1.defense + m2.defense) / 2);\n      stats.speed = Math.floor((m1.speed + m2.speed) / 2);\n    }\n\n    return (\n      <div className={\"party-member-stats\" + (stats.health === \"--\" ? \" empty\" : \"\")}>\n        <span><img src={icon_health} className=\"class-icon\" alt={\"stat-health\"} title=\"Health\"/><span>{stats.health}</span></span>\n        <span><img src={icon_attack} className=\"class-icon\" alt={\"stat-attack\"} title=\"Attack\"/><span>{stats.attack}</span></span>\n        <span><img src={icon_intelligence} className=\"class-icon\" alt={\"stat-health\"} title=\"Intelligence\"/><span>{stats.intelligence}</span></span>\n        <span><img src={icon_defense} className=\"class-icon\" alt={\"stat-health\"} title=\"Defense\"/><span>{stats.defense}</span></span>\n        <span><img src={icon_speed} className=\"class-icon\" alt={\"stat-health\"} title=\"Speed\"/><span>{stats.speed}</span></span>\n      </div>\n    )\n  }\n}\n\n/**\n * A component representing the clickable relic button next to the monster.\n */\nclass MonsterPlannerRelicSlot extends PureComponent {\n\n  render() {\n    return (\n      <div className=\"party-member-relic-slot\" onClick={this.props.onClick} title={this.props.relicName}>\n\n        <div className=\"relic-sprite\"\n             style={{\"backgroundImage\": \"url(/siralim-planner/relic_icons/\" + this.props.sprite_filename + \")\"}}></div>\n\n\n      </div>\n    )\n  }\n}\n\n/**\n * A component representing a single party member on the Monster Planner interface.\n * @property {String} state.monsterClass The class of the monster.\n */\nclass MonsterPlannerPartyMember extends PureComponent {\n\n  /**\n   * The constructor.\n   * @param  {Object} props The props.\n   */\n  constructor(props) {\n    super(props);\n    this.state = {\n      monsterClass: \"empty\"\n    }\n  }\n\n  /**\n   * When component mounts, get the class of this monster.\n   */\n  componentDidMount() {\n    this.setState({\n      monsterClass: this.getMonsterClass()\n    });\n  }\n\n  /**\n   * When component updates, get the class of this monster.\n   */\n  componentDidUpdate(prevProps, prevState) {\n    if(!_.isEqual(prevProps, this.props)) {\n      this.setState({\n        monsterClass: this.getMonsterClass()\n      });\n    }\n  }\n\n  /**\n   * A function to get the class of this monster, which is based on the first and second monster\n   * of this party member.\n   * @return {String} The class name of this monster, or \"empty\" if it has no class.\n   */\n  getMonsterClass() {\n    const pm1 = this.props.partyMember[0].monster;\n    const pm2 = this.props.partyMember[1].monster;\n    if(pm2 && pm2.class) {\n      return pm2.class;\n    } else if (pm1 && pm1.class) {\n      return pm1.class;\n    }\n    return \"empty\";\n  }\n\n\n  /**\n   * The render function.\n   * @return {ReactComponent} A div representing this party member.\n   */\n  render() {\n    return (\n      <div className={\"monster-planner-party-member cls-\" + this.state.monsterClass.toLowerCase()}>\n        <div className={\"party-member-profile cls-\" + this.state.monsterClass.toLowerCase()}>\n          <MonsterPlannerRelicSlot\n            onClick={this.props.onRelicClick}\n            relicName={this.props.relic ? this.props.relic.name : \"No relic selected\"}\n            sprite_filename={this.props.relic ? this.props.relic.abbreviation.toLowerCase() + \".png\" : null}/>\n          <MonsterPlannerCreatureSprite sprite_filename={this.props.partyMember[0].monster ? this.props.partyMember[0].monster.sprite_filename : null}/>\n          <MonsterPlannerCreatureStats monster_1={this.props.partyMember[0].monster} monster_2={this.props.partyMember[1].monster}/>\n          <MonsterPlannerCreatureClass monsterClass={this.state.monsterClass}/>\n\n        </div>\n        <div className={\"party-member-traits cls-\" + this.state.monsterClass.toLowerCase()}>\n\n          {this.props.partyMember.map((traitSlot, i) => \n            <MonsterPlannerTraitSlot\n              monster={traitSlot.monster}\n              error={traitSlot.error}\n              key={i}\n              traitSlotIndex={i}\n              draggable=\"true\"\n\n              onDragStart={() => this.props.onDragStart({ partyMemberId: this.props.partyMemberId, traitSlotId: i })}\n              onDragOver={() => this.props.onDragOver({ partyMemberId: this.props.partyMemberId, traitSlotId: i })}\n              onDrop={() => this.props.onDrop({ partyMemberId: this.props.partyMemberId, traitSlotId: i })}\n              onMouseUp={() => this.props.onMouseUp(this.props.partyMemberId, i, traitSlot.monster ? traitSlot.monster : null)}\n\n              clearPartyMember={() => this.props.clearPartyMember(this.props.partyMemberId, i)}\n            />             \n          )}\n        </div>\n      </div>\n    )\n  }\n}\n\n\n/**\n * The relic selection modal.\n */\nclass RelicSelectionModal extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      currentRelic: null,\n    }\n  }\n\n  /**\n   * When component updates, and the relic has changed in the parent\n   * and this component does not yet have a relic, set the relic\n   * to the first one in the parent component.\n   * @param  {Object} prevProps The previous props.\n   * @param  {Object} prevState The previous state.\n   */\n  componentDidUpdate(prevProps, prevState) {\n    if(!_.isEqual(prevProps.currentRelic, this.props.currentRelic))\n    {\n      this.setState({\n        currentRelic: this.props.currentRelic ? this.props.currentRelic : this.props.relicsList[0]\n      })\n\n    }\n  }\n\n  /**\n   * Handle the relic change, i.e. change this.state.relic\n   * to the provided relic.\n   * @param  {obj} relic The relic to update to.\n   */\n  handleRelicChange(relic) {\n    let currentRelic = null;\n    for(let r of this.props.relicsList) {\n      if(r.abbreviation === relic.abbreviation) {\n        currentRelic = r;\n        break;\n      }\n    }\n    this.setState({\n      currentRelic: currentRelic,\n    })\n  }\n\n  /**\n   * Get the icon corresponding to this relic's stat bonus.\n   * @param  {str} stat The stat to get the icon of.\n   * @return {React.component}      The icon.\n   */\n  getStatIcon(stat) {\n    let statIcon;\n    if(stat === \"Health\") statIcon = icon_health;\n    if(stat === \"Attack\") statIcon = icon_attack;\n    if(stat === \"Intelligence\") statIcon = icon_intelligence;\n    if(stat === \"Defense\") statIcon = icon_defense;\n    if(stat === \"Speed\") statIcon = icon_speed;\n    return statIcon;\n  }\n\n  /**\n   * The render function. Is super long and needs breaking down into smaller components.\n   * @return {ReactComponent} The anointments modal.\n   */\n  render() {\n    return (\n      <Modal className=\"modal-content modal-content-info relic-selection-modal modal-wide \"\n             overlayClassName=\"modal-overlay modal-overlay-info is-open\" isOpen={this.props.modalIsOpen}>\n        <div className=\"modal-header\">\n          <h3>Relics <span style={{'marginLeft': '20px'}}>\n            (currently selected: {this.props.currentRelic ? this.props.currentRelic.name : \"None\"})</span></h3>\n          <button id=\"close-upload-party-modal\" className=\"modal-close\" onClick={this.props.closeModal}><FontAwesomeIcon icon={faTimes} /></button>\n        </div>\n\n        <div className=\"info-modal specialization-selection relic-selection\">\n          <nav className=\"specialization-selection-nav\">\n            {\n              this.props.relicsList.map((s, i) =>\n                <div key={i} className={\"specialization-option \" + (_.isEqual(this.state.currentRelic, s) ? \"current\" : \"\")\n                  + (_.isEqual(s, this.props.currentRelic) ? \" has-anointment\" : \"\")\n                  }\n                  onClick={() => this.handleRelicChange(s)}>\n                  <span className=\"option-icon\" style={{\"backgroundImage\": \"url(/siralim-planner/relic_icons/\" + s.abbreviation.toLowerCase() + \"_sm.png)\"}}></span>\n                  { s.name }\n                </div>\n\n              )\n            }\n          </nav>\n          <div className=\"specialization-selection-list\">\n            <div className=\"relic-name-header\">\n              <div className=\"relic-name-header-name\">\n                <h2 className=\"no-border-bottom\">\n                {this.state.currentRelic &&\n                 <span className=\"relic-icon\"\n                       style={{\"backgroundImage\": \"url(/siralim-planner/relic_icons/\" + this.state.currentRelic.abbreviation.toLowerCase() + \".png)\"}}></span>\n                 }\n                {this.state.currentRelic && this.state.currentRelic.name}</h2>\n                <h5>\n                {this.state.currentRelic && \"Stat bonus: \"}\n                {this.state.currentRelic &&\n                  <img className=\"relic-stat-icon\" src={this.getStatIcon(this.state.currentRelic.stat_bonus)} alt=\"Stat bonus icon\"/>}\n                {this.state.currentRelic && this.state.currentRelic.stat_bonus}\n                </h5>\n              </div>\n              <div className=\"relic-name-header-button\">\n                {_.isEqual(this.state.currentRelic, this.props.currentRelic) ?\n\n                  <button className=\"selected\" onClick={() => this.props.updateRelic(this.state.currentRelic)}><FontAwesomeIcon icon={faCheck}/>Selected</button> :\n                  <button onClick={() => this.props.updateRelic(this.state.currentRelic)}><FontAwesomeIcon icon={faSave}/>Save</button>\n                }\n              </div>\n            </div>\n            <table id=\"relic-perks-table\">\n              <thead>\n                <tr>\n                  <th>Rank</th>\n                  <th>Bonus</th>\n                </tr>\n              </thead>\n              <tbody>\n                {\n                  this.state.currentRelic && this.state.currentRelic.perks && this.state.currentRelic.perks.map ((perk, i) =>\n                    <tr key={i}>\n                      <td>{perk.rank}</td>\n                      <td>{perk.description}</td>\n                    </tr>\n                )}\n\n              </tbody>\n            </table>\n          </div>\n        </div>\n      </Modal>\n\n    )\n  }\n}\n\n/**\n * The monster planner interface (i.e. the section with 6 party members).\n * Drag and drop Code found here: https://codepen.io/frcodecamp/pen/OEovqx \n * @property {Boolean} state.dragging Whether the user is currently dragging a trait.\n * @property {Ref} myRef A reference for the element of this div.\n */\nclass MonsterPlanner extends Component {\n\n  /**\n   * The constructor\n   * @param  {Object} props The props.\n   */\n  constructor(props) {\n    super(props);\n    this.state = {\n      dragging: false,\n      relicIndex: null, // Index of most recently selected relic.\n    }\n    this.myRef = React.createRef();\n  }\n\n  // A function to handle the drag start (i.e. when a row is dragged).\n  \n  /**\n   * A function to handle the drag start (i.e. when a row is dragged).\n   * @param  {Object} data The data from the drag event.\n   */\n  handleDragStart = data => event => {\n    let fromItem = JSON.stringify({ partyMemberId: data.partyMemberId, traitSlotId: data.traitSlotId });\n    event.dataTransfer.setData(\"dragContent\", fromItem);\n    this.setState({\n      dragging: true,\n    })\n  };\n\n  /**\n   * A function to handle the drag over event.\n   * @param  {Object} data The data from the drag event.\n   */\n  handleDragOver = data => event => {\n    event.preventDefault(); // Necessary. Allows us to drop.\n    this.setState({\n      dragging: false,\n    })\n    return false;\n  };\n\n\n  /**\n   * A function to handle the event when dragging something and the mouse button is released.\n   * When this happens, the rows are swapped.\n   * @param  {Object} data The data from the drag event.\n   */\n  handleDrop = data => event => {\n    event.preventDefault();\n\n    let fromItem = JSON.parse(event.dataTransfer.getData(\"dragContent\"));\n    let toItem = { partyMemberId: data.partyMemberId, traitSlotId: data.traitSlotId };\n\n    this.swapItems(fromItem, toItem);\n    return false;\n  };\n\n  // A function to swap two items.\n  // Once this swap is complete, pass this update to the parent component\n  // so that the monsterPlannerRows are updated.\n  // These changes will get propagated back to this component.\n  \n\n  /**\n   * A function to swap two items.\n   * Once this swap is complete, pass this update to the parent component\n   * so that the monsterPlannerRows are updated.\n   * These changes will get propagated back to this component.\n   * @param  {Object} fromItem The swapper.\n   * @param  {Object} toItem   The swapee.\n   */\n  swapItems = (fromItem, toItem) => {\n    let partyMembers = [...this.props.partyMembers];\n\n    let fromPID = fromItem.partyMemberId;\n    let fromTID = fromItem.traitSlotId;\n\n    let toPID = toItem.partyMemberId;\n    let toTID = toItem.traitSlotId;\n\n    let fromObj = {...this.props.partyMembers[fromPID][fromTID]};\n    let toObj   = {...this.props.partyMembers[toPID][toTID]};\n\n    partyMembers[fromPID][fromTID] = toObj;\n    partyMembers[toPID][toTID] = fromObj;\n\n    this.setState({ dragging: false }, () => this.props.updatePartyMembers(partyMembers));\n  };\n\n  // When the mouse button is released while hovering over a row,\n  // call the openModal function on the parent of this component.\n  // i.e. Open the MonsterSelection modal when a row is clicked.\n  \n  /**\n   * When the mouse button is released while hovering over a row,\n   * call the openModal function on the parent of this component.\n   * i.e. Open the MonsterSelection modal when a row is clicked.\n   * @param  {String} partyMemberId The id of the party member that was clicked. (0, 1, 2, 3, 4, 5)\n   * @param  {String} traitSlotId   The id of the trait slot that was clicked (0, 1, 2)\n   * @param  {Object} monster       The monster in the trait slot.\n   */\n  handleMouseUp(partyMemberId, traitSlotId, monster) {\n    this.props.openModal(partyMemberId, traitSlotId, monster);\n  }\n\n  /**\n   * Update the relic at the current index to a new relic.\n   * @param  {Object} newRelic The relic to update the relic at state.relicIndex to.\n   */\n  updateRelic(newRelic) {\n    const relicIndex = this.state.relicIndex;\n    let newRelics = [];\n    for(let i = 0; i < this.props.relics.length; i++) {\n      newRelics[i] = this.props.relics[i];\n      if(i === relicIndex) {\n        newRelics[i] = newRelic;\n      }\n    }\n    this.props.updateRelics(newRelics);\n  }\n\n  /**\n   * Open the relic selection modal for the given relic index.\n   * @param  {int} relicIndex Index of the relic that was clicked.\n   */\n  openRelicModal(relicIndex) {\n    this.setState({\n      relicModalIsOpen: true,\n      relicIndex: relicIndex\n    })\n  }\n\n  /**\n   * Close the relic modal.\n   */\n  closeRelicModal() {\n    this.setState({\n      relicModalIsOpen: false,\n      relicIndex: null,\n    })\n  }\n\n  /**\n   * The render function.\n   * @return {ReactComponent} A div containing the Monster Planner interface.\n   */\n  render() {\n    return (\n      <div id=\"monster-planner\" ref={this.myRef}>\n\n        <RelicSelectionModal\n          modalIsOpen={this.state.relicModalIsOpen}\n          closeModal={this.closeRelicModal.bind(this)}\n\n          relicsList={this.props.relicsList}\n          currentRelic={this.props.relics[this.state.relicIndex]}\n          relicIndex={this.state.relicIndex}\n          updateRelic={this.updateRelic.bind(this)}\n\n        />\n\n\n        <h3 className=\"section-title\">Party</h3>\n        {this.props.partyMembers.map((partyMember, i) => \n          <MonsterPlannerPartyMember\n            key={i}\n            partyMember={partyMember}\n            clearPartyMember={this.props.clearPartyMember}\n            partyMemberId={i}\n            relic={this.props.relics[i]}\n            onRelicClick={() => this.openRelicModal(i)}\n\n            onDragStart={this.handleDragStart.bind(this)}\n            onDragOver={this.handleDragOver.bind(this)}\n            onDrop={this.handleDrop.bind(this)}\n            onMouseUp={this.handleMouseUp.bind(this)}\n          />\n        )}\n      </div>\n    )\n  }\n}\n\nexport default MonsterPlanner;","import React, {PureComponent} from 'react';\nimport Modal from 'react-modal';\nimport _ from 'underscore';\nimport Select, { components } from 'react-select';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\n\nimport { faChevronLeft } from '@fortawesome/free-solid-svg-icons'\nimport { faChevronRight } from '@fortawesome/free-solid-svg-icons'\nimport { faTimes } from '@fortawesome/free-solid-svg-icons'\nimport { faBolt } from '@fortawesome/free-solid-svg-icons'\nimport { faCheck } from '@fortawesome/free-solid-svg-icons'\n\nconst specializationsList = require('../data/specializations');\n\nconst { Option, ValueContainer } = components;\n/**\n * Override for the Option item in react-select to display icons in the options.\n * @param  {Object} props The props.\n * @return {ReactComponent}       The option.\n */\nconst IconOption = props => (\n  <Option {...props}>\n    <span className=\"option-icon\" style={{\"backgroundImage\": \"url(/siralim-planner/specialization_icons/\" + props.value + \".png)\"}}></span>\n    {props.data.label}\n  </Option>\n);\n\n/**\n * Override for the ValueContainer for react-select to display icons in the select element.\n * @param  {children}    options.children The children from react-select\n * @param  {props} options.props    The props\n * @return {ReactElement}                     The ValueContainer\n */\nconst MyValueContainer = ({children, ...props}) => {\n  const { hasValue } = props;\n  const value = props.getValue()[0];\n  if (!hasValue) {\n    return (\n      <components.ValueContainer {...props}>\n        {children}\n      </components.ValueContainer>\n    );\n  }\n\n  return (\n    <ValueContainer {...props} className=\"value-container\">\n      <span className=\"option-icon\" style={{\"backgroundImage\": \"url(/siralim-planner/specialization_icons/\" + value.value + \".png)\"}}></span>\n      {children}\n    </ValueContainer>\n  )\n};\n\n\n/**\n * Override for customStyles for react-select.\n * @type {Object}\n */\nconst customStyles = {\n  control: (provided, state) => ({\n    ...provided,\n    border: state.isSelected ? '2px solid rgba(0, 0, 0, 0.4) !important' : (state.isFocused ? '2px solid rgba(0, 0, 0, 0.3) !important' : '2px solid rgba(0, 0, 0, 0.4) !important'),\n    color: 'red',\n    boxShadow: \"none\",\n  })\n}\n\n\n\n/**\n * The modal that pops up when the user clicks on the Anointments\n * button on the specializations box on the left side.\n * @property {Object} state.currentSpecialization The current specialization object.\n */\nclass SpecializationPlannerAnointmentsModal extends PureComponent {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      currentSpecialization: null,\n    }\n  }\n\n  /**\n   * When component updates, and the specialisation has changed in the parent\n   * and this component does not yet have a specialization, set the specialization\n   * to the first one in the parent component (i.e. Hell Knight).\n   * @param  {Object} prevProps The previous props.\n   * @param  {Object} prevState The previous state.\n   */\n  componentDidUpdate(prevProps, prevState) {\n    if(!_.isEqual(prevProps.currentSpecialization, this.props.currentSpecialization) && !this.state.currentSpecialization)\n    { \n      this.setState({\n        currentSpecialization: this.props.specializations[0]\n      })\n    }\n  }\n\n\n  /**\n   * Handle the specialization change, i.e. change this.state.currentSpecialization\n   * to the provided specialization.\n   * @param  {obj} specialization The specialization to update to.\n   */\n  handleSpecializationChange(specialization) {\n    let currentSpecialization = null;\n    for(let s of this.props.specializations) {\n      if(s.abbreviation === specialization.abbreviation) {\n        currentSpecialization = s;\n        break;\n      }\n    }\n    this.setState({\n      currentSpecialization: currentSpecialization,\n    })\n  }\n\n  /**\n   * The render function. Is super long and needs breaking down into smaller components.\n   * @return {ReactComponent} The anointments modal.\n   */\n  render() {\n    let anointmentNames = new Set();\n    let anointmentsInSpecialization = {};\n    for(let a of this.props.anointments) {\n      if(!a) continue;\n      if(!anointmentsInSpecialization.hasOwnProperty(a.spec_abbrev)) {\n        anointmentsInSpecialization[a.spec_abbrev] = 0;\n      }\n      anointmentsInSpecialization[a.spec_abbrev]++;\n      anointmentNames.add(a.name);\n    }\n\n    return ( \n      <Modal className=\"modal-content modal-content-info  specialization-selection-modal modal-wide \"\n             overlayClassName=\"modal-overlay modal-overlay-info is-open\" isOpen={this.props.modalIsOpen}>\n        <div className=\"modal-header\">\n          <h3>Anointments <span style={{'marginLeft': '20px'}}>\n            {this.props.anointments.length} of {this.props.maxAnointments} anointments selected</span></h3>\n          <button id=\"close-upload-party-modal\" className=\"modal-close\" onClick={this.props.closeModal}><FontAwesomeIcon icon={faTimes} /></button>\n        </div>\n\n        <div className=\"info-modal specialization-selection\">         \n          <nav className=\"specialization-selection-nav\">\n            {\n              this.props.specializations.map((s, i) => \n                <div key={i} className={\"specialization-option \" + (_.isEqual(this.state.currentSpecialization, s) ? \"current\" : \"\") +\n                  ((anointmentsInSpecialization[s.abbreviation] > 0) ? \" has-anointment\" : \"\")\n\n                  }\n                  onClick={() => this.handleSpecializationChange(s)}>\n                  <span className=\"option-icon\" style={{\"backgroundImage\": \"url(/siralim-planner/specialization_icons/\" + s.abbreviation + \".png)\"}}></span>\n                  { s.name }{ (anointmentsInSpecialization[s.abbreviation] > 0) && (\" (\" + anointmentsInSpecialization[s.abbreviation] + \")\") }\n                </div>\n\n              )\n            }\n          </nav>\n          <div className=\"specialization-selection-list\">   \n             <h2>{this.state.currentSpecialization && this.state.currentSpecialization.name} Perks</h2> \n              <table id=\"perks-table\" className={this.props.atMaxAnointments ? \"max-anoints\" : \"\"}>\n                <thead>\n                  <tr>\n                    <th></th>\n                    <th>Perk Name</th>\n                    <th>Description</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {\n                    this.state.currentSpecialization && this.state.currentSpecialization.perks.map ((perk, i) =>\n                      <tr key={i} onClick={() => this.props.toggleAnointment(perk)}\n                          className={(anointmentNames.has(perk.name) ? \"active\" : \"\") + (perk.anointment === \"Yes\" ? \"\" : \"no-anoint\")}\n                          title={perk.anointment === \"No\" ? \"This perk cannot be selected as an anointment.\" : undefined}\n\n                          >\n                        <td>{ anointmentNames.has(perk.name) && <span className=\"green-tick\"><FontAwesomeIcon icon={faCheck}/></span>}</td>\n                        <td>{perk.name}</td>\n                        <td>{perk.description}</td>\n                      </tr>\n                  )}\n\n                </tbody>\n              </table>\n              <section className=\"flavour-text\">\n                <h4>About the {this.state.currentSpecialization && this.state.currentSpecialization.name}</h4>\n                {this.state.currentSpecialization && this.state.currentSpecialization.description.split('\\\\n').map((par, i) => \n                  (<p key={i}>{par}</p>)\n                )}\n              </section>\n          </div>\n        </div>  \n      </Modal>\n\n    )\n  }\n}\n\n\n/**\n * A single Anointment that appears in the list of anointments\n * on the Specializations tab on the left side.\n * Note that this has nothing to do with the Anointments modal.\n * @\n */\nclass SpecializationPlannerAnointment extends PureComponent {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      justUpdated: false,\n    }\n  }\n\n  /**\n   * Render an empty row that says \"No anointment selected\".\n   * @return {ReactElement} An empty row.\n   */\n  renderEmptyRow() {\n    return (<div className=\"empty-row\">No anointment selected</div>)\n  }\n\n  /**\n   * The render function.\n   * @return {ReactComponent} A div representing an anointment.\n   */\n  render() {\n    const rowErrors = null;\n\n    return (\n    <div className=\"trait-slot anointment-slot\">\n      <div\n        className={\"anointment-slot-non-clickable\" + \n          (rowErrors ? \" invalid-row\" : \"\") + \n          (this.state.justUpdated ? \" just-updated\": \"\")\n        }\n        title={rowErrors }\n      >\n      { !this.props.perk ? this.renderEmptyRow() :\n        <div className=\"anointment\">\n          <div className=\"anointment-name-and-source\">\n            <div className=\"anointment-name\">            \n            {this.props.perk.name}\n            </div>\n            <div className=\"anointment-source\">\n              (<span className=\"option-icon\" style={{\"backgroundImage\": \"url(/siralim-planner/specialization_icons/\" + this.props.perk.spec_abbrev + \".png)\"}}>\n                </span> {this.props.perk.spec})\n            </div>\n          </div>\n          <div className=\"anointment-desc\">{this.props.perk.description}</div>\n        </div>\n      }\n      </div>\n    </div>\n    )\n  }\n}\n\n\n\n\n/**\n * The specialization planner, which appears as a box on the left hand side of the page.\n * Allows the user to select their specialization and anointments.\n * @property {Boolean} state.isOpen Whether the planner is open (true), or pushed to the side (false).\n * @property {Array} state.specializations A list of all specializations, which are copied over from \n *                                         specializationsList and updated with values and labels for react-select.\n * @property {Boolean} state.anointmentsModalIsOpen Whether or not the anointments modal is open.\n */\nclass SpecializationPlanner extends PureComponent {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpen: true,\n      specializations: [],\n\n      anointmentsModalIsOpen: false,\n    }\n  }\n\n  /**\n   * Toggle whether this is open (or pushed to the side).\n   */\n  toggleOpen() {\n    this.setState({\n      isOpen: !this.state.isOpen\n    })\n  }\n\n  /**\n   * When this component mounts, copy over the specializations from the global specializationsList\n   * and append value and labels, which are required for react-select.\n   */\n  componentDidMount() {\n    let specializations = [...specializationsList];\n    for(let s of specializations) {\n      s['value'] = s.abbreviation;\n      s['label'] = s.name;\n    }\n\n    this.setState({\n      specializations: specializations,\n    })\n  }\n\n\n  /**\n   * Close the anointments modal and allow scrolling in the document body.\n   */\n  closeAnointmentsModal() {\n    this.setState({\n      anointmentsModalIsOpen: false,\n    }, () => {\n      document.body.style['overflow-y'] = \"scroll\";\n    })\n  }\n\n  /**\n   * Open the anointments modal and prevent scrolling in the document body.\n   */\n  openAnointmentsModal() {\n    this.setState({\n      anointmentsModalIsOpen: true,\n    }, () => {\n      document.body.style['overflow-y'] = \"hidden\";\n    })\n  }\n\n\n  /**\n   * Handle a specialization change, i.e. the user has selected a different\n   * specialization in the drop down list.\n   * @param  {Object} selectedOption The selected option from react-select.\n   */\n  handleSpecializationChange(selectedOption) {\n    let currentSpecialization = null;\n    for(let s of this.state.specializations) {\n      if(s.abbreviation === selectedOption.value) {\n        currentSpecialization = s;\n        break;\n      }\n    }\n    this.props.updateSpecialization(currentSpecialization);\n  }\n\n\n  /**\n   * The render function.\n   * @return {ReactComponent} The specialization planner div.\n   */\n  render() {\n\n    const freeAnointmentSlots = new Array(Math.max(0, this.props.maxAnointments - this.props.anointments.length)).fill(null); // TODO: Get this to work for Royal\n\n    let specOptions = [];\n    for(let s of this.state.specializations) {\n      specOptions.push({ value: s.abbreviation, label: s.name });\n    }\n\n    return (\n      <div id=\"specialization-planner\" className={(!this.state.isOpen ? \"hide \" : \"\") +\n        \"spe-\" + (this.props.currentSpecialization && this.props.currentSpecialization.abbreviation)}>\n\n        <div className=\"toggle-bar\" onClick={this.toggleOpen.bind(this)}>\n          <FontAwesomeIcon icon={(this.state.isOpen ? faChevronLeft : faChevronRight)}/>\n        </div>\n\n        <SpecializationPlannerAnointmentsModal \n          modalIsOpen={this.state.anointmentsModalIsOpen}\n          closeModal={this.closeAnointmentsModal.bind(this)}\n\n          anointments={this.props.anointments}\n          specializations={this.state.specializations}\n          specOptions={specOptions}\n          currentSpecialization={this.props.currentSpecialization}\n\n          maxAnointments={this.props.maxAnointments}\n          atMaxAnointments={this.props.maxAnointments === this.props.anointments.length}\n\n          toggleAnointment={this.props.toggleAnointment}\n        />\n\n        <h3 className=\"section-title\">Specialization</h3>\n\n        <Select \n            styles={customStyles}\n            value={this.props.currentSpecialization}\n            onChange={this.handleSpecializationChange.bind(this)}\n            options={specOptions}\n            menuPosition=\"fixed\"\n            components={{ Option: IconOption, ValueContainer: MyValueContainer }}\n          />\n\n\n        <button aria-label=\"View specializations\" className=\"perks-and-anointments-button\" onClick={() => this.openAnointmentsModal()}>\n          <FontAwesomeIcon icon={faBolt}/>Anointments\n        </button>\n\n        <div className=\"anointments-list\">\n        { this.props.anointments.map((anointment, i) =>\n          <SpecializationPlannerAnointment key={i} perk={anointment}/>\n        )}\n        { freeAnointmentSlots.map((anointment, i) =>\n          <SpecializationPlannerAnointment key={i} perk={anointment}/>\n        )}\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default SpecializationPlanner;","/**\n * A function to parse the character section of a build string from Siralim Ultimate.\n * @param  {String} text The character section of the build string.\n * @return {{String, Array}}      The specialization and list of the names of the anointments\n *                                from the build string.\n */\nfunction parseCharacterSection(text) {\n\n  let spec = '';\n  let anointment_names = [];\n\n  for(const line of text.split('\\n')) {\n    if(line.indexOf(\"the \") !== -1 && !spec) {\n      spec = line.split(\"the \")[1];\n      if(spec.indexOf(\" (\") !== -1) {\n        spec = spec.split(' (')[0]; // Remove (Ascended)\n      }\n    } else if (line.indexOf('Anointments: ') !== -1) {\n      anointment_names = line.split('Anointments: ')[1].split(', ');\n    }\n  }\n  let an_set = new Set(anointment_names);\n  if(an_set.size !== anointment_names.length) throw new Error(\"Duplicate anointment.\")\n\n  if(anointment_names.length > 15) throw new Error(\"Too many anointments.\");\n  if(spec !== \"Royal\" && anointment_names.length > 5) throw new Error(\"Too many anointments.\");\n\n\n  return { spec: spec, anointment_names: anointment_names};\n\n}\n\n\n/**\n * A function to parse the creature section of a build string from Siralim Ultimate.\n * Function written by bluequakeralex and adapted by beratedbert.\n * @param  {String} text The creature section of the build string.\n * @return {Object}      An object containing {traits, relics}, which are an array\n *                       of 18 (or fewer) trait names and 6 (or fewer) relic names respectively.\n */\nfunction parseCreatureSection(text) {  \n\n  const innateDetectionText = \"Innate Trait: \";\n  const fusedDetectionText = \"Fused Trait: \";\n  const traitSlotDetectionText = \"Trait Slot: \";\n  const relicSlotDetectionText = \"Relic: \";\n\n  // Split into creatures using the ---- lines.\n  // Hopefully this does not change between patches.\n  let creatures = text.split('------------------------------');\n  if(creatures.length > 7) throw new Error(\"Party appears to have more than 6 creatures.\");\n\n  creatures = creatures.slice(0, 6); // Remove the last element, which is empty space after the last\n                                     // dashed line.\n\n  let innates = new Array(6).fill(null);\n  let secondaries = new Array(6).fill(null);\n  let artifacts = new Array(6).fill(null);\n  let relics = new Array(6).fill(null);\n\n  // For each creature, get the innate, secondary and artifact trait.\n  // Throw an error if a creature has more than one of each trait type.\n  // If the creature does not have a trait in that slot, it will be null.\n  for(let i = 0; i < 6; i++) {\n\n    if(!creatures[i]) continue;\n\n    let innateTrait = null;\n    let secondaryTrait = null;\n    let artifactTrait = null;\n    let relic = null;\n\n    let lines = creatures[i].split('\\n');\n\n    for (const line of lines) {\n      if (line.startsWith(innateDetectionText)) {\n        if(innateTrait) throw new Error(\"Creature #\" + (i + 1) + \" has more than one primary trait.\")\n        innateTrait = line.slice(innateDetectionText.length);\n      }\n      else if (line.startsWith(fusedDetectionText)) {\n        if(secondaryTrait) throw new Error(\"Creature #\" + (i + 1) + \" has more than one secondary trait.\")\n        secondaryTrait = line.slice(fusedDetectionText.length);\n      }\n      else if (line.startsWith(traitSlotDetectionText)) {\n        if(artifactTrait) throw new Error(\"Creature #\" + (i + 1) + \" has more than one artifact trait.\")\n        artifactTrait = line.slice(traitSlotDetectionText.length).split(\":\")[0];\n      }\n      else if (line.startsWith(relicSlotDetectionText)) {\n        if(relic) throw new Error(\"Creature #\" + (i + 1) + \" has more than one relic.\")\n        relic = line.slice(relicSlotDetectionText.length).split(' (Rank')[0];\n      }\n    }\n    innates[i] = innateTrait;\n    secondaries[i] = secondaryTrait;\n    artifacts[i] = artifactTrait;\n    relics[i] = relic;\n  }\n\n  let traitsArray = [];\n  let relicsArray = [];\n\n  for (let i = 0; i < 6; i++) {\n    const innate = innates[i];\n    const fusion = secondaries[i];\n    const artifact = artifacts[i];\n    const relic = relics[i];\n\n    traitsArray.push(innate);\n    traitsArray.push(fusion);\n    traitsArray.push(artifact);\n    relicsArray.push(relic);\n  }\n\n  let atLeastOne;\n  for(let i = 0; i < traitsArray.length; i++) {\n    if(traitsArray[i]) atLeastOne = true;\n  }\n  if(!atLeastOne) throw new Error(\"The party string does not appear to contain any traits.\")\n\n  return {traits: traitsArray, relics: relicsArray};\n\n}\n\n/**\n * A function to parse the build string from the export feature in Siralim Ultimate.\n * @param  {String} text The build string.\n * @return {{Array, String, Array}}      The list of trait names, specialization name, and anointment names.\n */\nfunction parsePartyString(text) {\n\n  if(text.indexOf('========== CREATURES ==========') === -1) {\n    throw new Error(\"The string does not appear to be a valid Siralim Ultimate build string.\")\n  }\n\n  const sections = text.split('========== CREATURES ==========')\n  \n  const {spec, anointment_names} = parseCharacterSection(sections[0]);\n  const {traits, relics} = parseCreatureSection(sections[1]);\n\n  return {traits, relics, spec, anointment_names};\n}\n\nexport default parsePartyString;","/** Return a random element from the given array. */\nfunction randomSample(items) {\n  const item = items[Math.floor(Math.random()*items.length)];\n  return item;\n}\n\nexport default randomSample;","import React, { Component } from \"react\";\nimport Modal from \"react-modal\";\nimport { withRouter } from \"react-router-dom\";\nimport _ from \"underscore\";\n\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faCheck } from \"@fortawesome/free-solid-svg-icons\";\nimport { faExclamationTriangle } from \"@fortawesome/free-solid-svg-icons\";\n\nimport InfoModal from \"./components/InfoModal\";\nimport UploadPartyModal from \"./components/UploadPartyModal\";\n\nimport AppHeader from \"./components/AppHeader\";\nimport AppFooter from \"./components/AppFooter\";\n\nimport MonsterSelectionModal from \"./components/MonsterSelectionModal\";\nimport MonsterPlanner from \"./components/MonsterPlanner\";\nimport SpecializationPlanner from \"./components/SpecializationPlanner\";\n\nimport parsePartyString from \"./functions/parsePartyString\";\nimport randomSample from \"./functions/randomSample\";\nimport getTraitErrors from \"./functions/getTraitErrors\";\n\nimport \"./App.scss\";\n\nModal.setAppElement(\"#root\");\n\nconst UID_HASH_LENGTH = 6;\nconst monsterData = require(\"./data/data\");\nconst specializationsList = require(\"./data/specializations\");\nconst metadata = require(\"./data/metadata\");\nconst compendium_version = metadata.compendium_version;\nconst relicsList = require(\"./data/relics\");\n// [\n//   {name: \"Wintermaul\", stat_bonus: \"Health\",  abbreviation: \"wintermaul\", perks: [{'rank': 10, 'description': 'Does a cool thing'}]},\n//   {name: \"Temptation\", abbreviation: \"temptation\"},\n//   {name: \"Salus\", abbreviation: \"salus\"},\n\n// ]\n\n/**\n * Construct a map (i.e. a JSON dictionary) that maps UIDs to the index\n * of that UID in traitsList.\n * @return {Object} A map of {uid: index}\n */\nfunction buildUIDMap() {\n  let monsterMap = {};\n  for (let i in monsterData) {\n    monsterMap[monsterData[i].uid] = parseInt(i);\n  }\n  return monsterMap;\n}\n\n/**\n * Construct a map (i.e. a JSON dictionary) that maps lowercased trait_names to\n * the UIDs in the database. This is necessary to import party strings.\n * @return {Object} A map of {trait_name: uid}\n */\nfunction buildTraitMap() {\n  let traitMap = {};\n  for (let i in monsterData) {\n    traitMap[monsterData[i].trait_name.toLowerCase()] = monsterData[i].uid;\n  }\n  return traitMap;\n}\n\n/**\n * Construct two maps: one mapping anointment UIDs (BMA, BMB etc) to the corresponding\n * perk, and another mapping anointment names (Union, Whetbone etc) to the corresponding\n * perk.\n * @return {Object} An object containing the anointment UID map and anointment name map.\n */\nfunction buildAnointmentMaps() {\n  let anointmentUIDMap = {};\n  let anointmentNameMap = {};\n  for (let s of specializationsList) {\n    for (let p of s.perks) {\n      if (p.anointment === \"No\") continue;\n      anointmentUIDMap[p.uid] = p;\n      anointmentNameMap[p.name] = p;\n    }\n  }\n  return {\n    anointmentUIDMap: anointmentUIDMap,\n    anointmentNameMap: anointmentNameMap,\n  };\n}\n\n/**\n * Construct a map that maps each relic UID to the relic objects.\n * @return {Object} An object containing the relic UID map.\n */\nfunction buildRelicUIDMap() {\n  let relicUIDMap = {};\n  for (let r of relicsList) {\n    relicUIDMap[r.uid] = r;\n  }\n  return relicUIDMap;\n}\n\n/**\n * Construct a map that maps specialization names to the specialization objects.\n * @return {Object} A map of {specialization name: specialization object}\n */\nfunction buildSpecializationNameMap() {\n  let specializationNameMap = {};\n  for (let s of specializationsList) {\n    specializationNameMap[s.name] = s;\n  }\n  return specializationNameMap;\n}\n\nconst monsterUIDMap = buildUIDMap();\nconst monsterTraitMap = buildTraitMap();\nconst { anointmentUIDMap, anointmentNameMap } = buildAnointmentMaps();\nconst specializationNameMap = buildSpecializationNameMap();\nconst relicUIDMap = buildRelicUIDMap();\n\n/**\n * A class representing the notification banner, which appears at the top when\n * a notification is made in the SiralimPlanner app.\n * @property {Boolean} state.hidden Whether this banner is currently hidden or not.\n */\nclass NotificationBanner extends Component {\n  /**\n   * Class constructor.\n   * @param  {Object} props The props.\n   * @return {void}\n   */\n  constructor(props) {\n    super(props);\n    this.state = {\n      hidden: true,\n    };\n    this.fadeOutTimeout = null;\n  }\n\n  /**\n   * When this component updates such that the prevProps are different\n   * and this notification banner was not already showing, set hidden=false\n   * (so the banner appears) and set a timeout for 6s for it to hide again.\n   * @param  {Object} prevProps The previous props.\n   * @param  {Object} prevState The previous state.\n   * @return {void}\n   */\n  componentDidUpdate(prevProps, prevState) {\n    if (_.isEqual(prevProps, this.props) && prevState.hidden === false) return;\n    if (this.props.status === null) return; // Ignore first successful load, which is null.\n    if (prevProps.notificationIndex === this.props.notificationIndex) return;\n\n    this.setState(\n      {\n        hidden: false,\n      },\n      () => {\n        window.clearTimeout(this.fadeOutTimeout);\n        this.fadeOutTimeout = window.setTimeout(() => this.setHidden(), 6000);\n      }\n    );\n  }\n\n  /**\n   * Hide the notification banner (this sets the opacity to 0 via CSS so that\n   * way nothing gets moved around awkwardly.)\n   */\n  setHidden() {\n    this.setState({\n      hidden: true,\n    });\n  }\n\n  /**\n   * The render function\n   * @return {ReactComponent} The notification banner component.\n   */\n  render() {\n    let icon = faExclamationTriangle;\n    if (this.props.status === \"success\") icon = faCheck;\n\n    return (\n      <div\n        className={\n          \"notification-banner notification-\" +\n          this.props.status +\n          (this.state.hidden ? \" hidden\" : \"\")\n        }\n      >\n        <FontAwesomeIcon icon={icon} />\n        &nbsp;&nbsp;{this.props.text}\n      </div>\n    );\n  }\n}\n\n/**\n * The main component which sits within App.\n * @property state.partyMembers {Array}  A list of 6 items, each of which corresponds to a party member.\n * @property state.anointments  {Array}  A list of the 5 anointments (or 15 if Royal) the user has selected.\n * @property state.relics  {Array}  A list of the 6 relics the user has selected (one per party member).\n * @property {Object} state.currentSpecialization    The currently selected specialization.\n * @property {Integer} state.maxAnointments The maximum number of anointments. Is changed to 15 when spec = Royal\n * @property {Integer} state.currentPartyMemberId The current party member id, i.e. 0, 1, 2, 3, 4 or 5.\n * @property {Integer} state.currentTraitSlotId The current party trait slot id, i.e. 0, 1 or 2.\n * @property {Integer} state.currentSlotId The current slot id, i.e. the slot the user most recently\n *                                      clicked on in the party planning interface.\n *                                      slot id = 0 means the first row in the table.\n * @property {Object} state.currentSelectedMonster A JSON obj corresponding to the monster that is currently\n *                                           selected, i.e. the one the user most recently clicked in\n *                                           the party planning interface.\n * @property {Set} state.monstersInParty An set of uids of the monsters/trait in the user's party.\n * @property {Boolean} state.modalIsOpen Whether the monster selection modal is open.\n * @property {Boolean} state.infoModalIsOpen Whether the information modal is open.\n * @property {Boolean} state.uploadBuildModalIsOpen Whether the upload build modal is open.\n * @property {String} state.notificationText Text to display in the notification banner at the top.\n * @property {String} state.notificationStatus The status of the notification, e.g. 'success', 'warning', 'error'.\n * @property {Integer} state.notificationIndex Keep track of the index of each notification, to avoid weird bugs with the\n *                                       banner refreshing for no reason when this component updates.\n *\n */\nclass SiralimPlanner extends Component {\n  /**\n   * The constructor.\n   * @param  {Object} props The props.\n   */\n  constructor(props) {\n    super(props);\n    this.originalState = {\n      partyMembers: [],\n      anointments: [],\n      relics: [],\n      currentSpecialization: null,\n      maxAnointments: 5,\n\n      currentPartyMemberId: null,\n      currentTraitSlotId: null,\n      currentSlotId: null,\n      currentSelectedMonster: null,\n\n      monstersInParty: new Set(),\n      modalIsOpen: false,\n      infoModalIsOpen: false,\n      uploadBuildModalIsOpen: false,\n\n      notificationText: null,\n      notificationStatus: null,\n      notificationIndex: 0,\n    };\n\n    this.state = this.originalState;\n  }\n\n  /**\n   * Generate a 'save string', which is a unique identifier of the entire party.\n   * This is done by taking the uid of each monster (underscore if no monster)\n   * across each of the 18 slots.\n   * Note that the string is quite long, and will be even longer if we later add\n   * in other things like traits, perks etc... so we might need to develop a\n   * back-end application like Flask to be able to generate a short URL.\n   */\n  generateSaveString() {\n    let partyMembers = this.state.partyMembers;\n    let saveString = \"\";\n\n    var c = 0;\n    for (let pm of partyMembers) {\n      for (let m of pm) {\n        if (!_.isEmpty(m.monster)) saveString += m.monster.uid;\n        else saveString += \"_\";\n        c++;\n        if (c > 18) break;\n      }\n    }\n\n    // Generate specialization string\n    if (this.state.currentSpecialization) {\n      saveString += \"&s=\" + this.state.currentSpecialization.abbreviation;\n    }\n\n    // Generate anointments string\n    if (this.state.anointments.length > 0) saveString += \"&a=\";\n    for (let a of this.state.anointments) {\n      saveString += a.uid;\n    }\n\n    // Generate relics string\n    if (this.state.relics.length > 0) saveString += \"&r=\";\n    for (let r of this.state.relics) {\n      if (!r) {\n        saveString += \"_\";\n        continue;\n      }\n      saveString += r.uid;\n    }\n\n    this.props.history.push(\"?b=\" + saveString);\n  }\n\n  /**\n   * Retrieve a set of the uids of every monster/trait (up to 18) in the current party.\n   * @param  {Array} partyMembers An array of Objects where each object is a party member.\n   * @return {Array}              An array of the uid of each monster/trait in the party.\n   */\n  getMonstersInParty(partyMembers) {\n    let monstersInParty = new Set();\n    for (let p of partyMembers) {\n      for (let m of p) {\n        if (m.monster.uid) monstersInParty.add(m.monster.uid);\n      }\n    }\n    return monstersInParty;\n  }\n\n  /**\n   * Given a particular monster, update the monster at the party member and trait slot id\n   * to be set to that monster.\n   * @param  {Object} monster The monster to replace the current monster with.\n   */\n  updatePartyMember(monster) {\n    let partyMembers = [...this.state.partyMembers];\n    partyMembers[this.state.currentPartyMemberId][\n      this.state.currentTraitSlotId\n    ].monster = monster;\n\n    let monstersInParty = this.getMonstersInParty(partyMembers);\n    this.setState(\n      {\n        partyMembers: [...partyMembers],\n        monstersInParty: monstersInParty,\n      },\n      () => {\n        this.closeModal();\n        this.generateSaveString();\n      }\n    );\n  }\n\n  /**\n   * Given a particular partyMemberId and traitSlotId, e.g. 1, 4,\n   * remove that monster/trait from the party.\n   * @param  {Integer} partyMemberId The id of the party member, e.g. 1.\n   * @param  {Integer} traitSlotId   The id of the trait slot, e.g. 4.\n   */\n  clearPartyMember(partyMemberId, traitSlotId) {\n    let partyMembers = [...this.state.partyMembers];\n    partyMembers[partyMemberId][traitSlotId].monster = {};\n    let monstersInParty = this.getMonstersInParty(partyMembers);\n\n    this.setState(\n      {\n        partyMembers: partyMembers,\n        monstersInParty: monstersInParty,\n      },\n      this.generateSaveString\n    );\n  }\n\n  /**\n   * Update the 18 monster planner rows to newRows and generate an updated\n   * saveString.\n   * @param  {Array} newMembers An array of monster objects.\n   */\n  updatePartyMembers(newMembers) {\n    this.setState(\n      {\n        partyMembers: newMembers,\n      },\n      this.generateSaveString\n    );\n  }\n\n  /**\n   * Update the anointments array to newAnointments and generate an updated\n   * saveString.\n   * @param  {Array} newAnointments An array of anointment objects.\n   */\n  updateAnointments(newAnointments) {\n    this.setState(\n      {\n        anointments: newAnointments,\n      },\n      this.generateSaveString\n    );\n  }\n\n  /**\n   * Update the relics array to newRelics and generate an updated\n   * saveString.\n   * @param  {Array} newRelics An array of relic objects.\n   */\n  updateRelics(newRelics) {\n    console.log(newRelics);\n    this.setState(\n      {\n        relics: newRelics,\n      },\n      this.generateSaveString\n    );\n  }\n\n  /**\n   * Parse the loadString into a list of UIDs (or null for underscores).\n   * @param  {String} str The string to parse.\n   * @return {Array}     An array of strings, where each string is a uid.\n   */\n  parseLoadString(str) {\n    let uids = [];\n    let currentUid = \"\";\n    for (let i = 0; i < str.length; i++) {\n      let c = str[i];\n      if (c === \"_\") {\n        if (currentUid.length > 0 && currentUid.length < UID_HASH_LENGTH)\n          throw new Error(\"Malformed uid\");\n        uids.push(null);\n      } else {\n        currentUid += c;\n        if (currentUid.length === UID_HASH_LENGTH) {\n          uids.push(currentUid);\n          currentUid = \"\";\n        }\n      }\n    }\n    // Throw errors if the string is not valid (i.e. too short or too long).\n    if (uids.length > 18) throw new Error(\"Too many uids\");\n    if (uids.length < 18) throw new Error(\"Not enough uids\");\n\n    return uids;\n  }\n\n  /**\n   * Parse the spec string (should contain two letters corresponding to\n   * a specialization) and return the specialization in the string.\n   * @param  {String} str The string to parse.\n   * @return {Object}     The specialization object.\n   * @throws {Error} If specialization is not found.\n   */\n  parseSpecString(str) {\n    for (let s of specializationsList) {\n      if (s.abbreviation === str) {\n        return s;\n      }\n    }\n    throw new Error(\"Specialization not found\");\n  }\n\n  /**\n   * Parse the anointments string and return a list of anointments\n   * whose uids are in the string.\n   * @param  {String} str The string to parse.\n   * @return {Array} The array of anointment objects.\n   * @throws {Error} If the string is not valid.\n   */\n  parseAnointmentsString(str) {\n    let anointments = [];\n    let a_uids = str.match(/.{1,3}/g);\n    let seen_uids = new Set();\n    for (let a of a_uids) {\n      if (a.length !== 3)\n        throw new Error(\"Anointment string contains invalid anointment id.\");\n      if (!anointmentUIDMap.hasOwnProperty(a))\n        throw new Error(\"Anointment id not found.\");\n      if (seen_uids.has(a)) throw new Error(\"Anointment appears twice.\");\n      seen_uids.add(a);\n\n      anointments.push(anointmentUIDMap[a]);\n    }\n    return anointments;\n  }\n\n  /**\n   * Parse the relics string and return a list of relics\n   * whose uids are in the string.\n   * TODO: Refactor this as it is using a lot of repeated code from parseLoadString.\n   * @param  {String} str The string to parse.\n   * @return {Array} The array of relic objects.\n   * @throws {Error} If the string is not valid.\n   */\n  parseRelicsString(str) {\n    let relics = [];\n\n    let uids = [];\n    let currentUid = \"\";\n    for (let i = 0; i < str.length; i++) {\n      let c = str[i];\n      if (c === \"_\") {\n        if (currentUid.length > 0 && currentUid.length < 2)\n          throw new Error(\"Malformed uid\");\n        uids.push(null);\n      } else {\n        currentUid += c;\n        if (currentUid.length === 2) {\n          uids.push(currentUid);\n          currentUid = \"\";\n        }\n      }\n    }\n    for (let uid of uids) {\n      if (!uid) {\n        relics.push(null);\n        continue;\n      }\n      if (!relicUIDMap.hasOwnProperty(uid))\n        throw new Error(\"Relic id not found.\");\n      relics.push(relicUIDMap[uid]);\n    }\n\n    return relics;\n  }\n\n  /**\n   * Given a list of uids, construct a new array of monsterPlannerRows\n   * where each item is the monster that corresponds to that particular\n   * uid. This is used to read in the buildString (from the URL) and\n   * from the in-game export of data to the clipboard.\n   *\n   * Returns a json object with the 18 rows, any notification message that pops up\n   * (right now just that the build could not be parsed or that it was parsed\n   * successfully), and a status code\n   * (warning, success, error, null).\n   * @param  {Array} uids An array of strings, where each string is a uid.\n   * @return {{Array, String, String}}      An array of party members, the notification text,\n   *                                        and notification status.\n   */\n  populateFromUids(uids) {\n    let noti, status;\n    //let monsterPlannerRows = [];\n    let partyMembers = [];\n    // Start by generating an empty list of 18 rows, corresponding to each\n    // trait slot.\n\n    for (let i = 0; i < 6; i++) {\n      partyMembers.push([]);\n      for (let j = 0; j < 3; j++) {\n        partyMembers[i].push({ monster: {} });\n      }\n    }\n\n    for (let i = 0; i < Math.min(18, uids.length); i++) {\n      let uid = uids[i];\n      if (uid !== null) {\n        if (monsterUIDMap.hasOwnProperty(uid)) {\n          partyMembers[Math.floor(i / 3)][i % 3].monster =\n            monsterData[monsterUIDMap[uid]];\n        } else {\n          partyMembers[Math.floor(i / 3)][i % 3].error =\n            \"Monster/trait does not exist or has changed\";\n          noti =\n            \"Your build could not be fully parsed as at least one monster trait was not found in the database.\";\n          status = \"warning\";\n        }\n      }\n    }\n    if (!noti) {\n      noti = \"Your build was parsed successfully.\";\n      status = \"success\";\n    }\n    return { partyMembers: partyMembers, noti: noti, status: status };\n  }\n\n  /** On component mount and on reset, transform monsterData into a new array, i.e.\n   * { row_id: <the index of the monster>, monster: <the JSON object of the monster> }\n   * This is necessary to get the drag and drop functionality to work.\n   * Every row needs a fixed id to function properly.\n   */\n  initialLoad() {\n    let notificationText = null;\n    let notificationStatus = null;\n\n    let partyMembers = [];\n    let relics = [];\n\n    for (let i = 0; i < 6; i++) {\n      partyMembers.push([]);\n      relics.push(null);\n      for (let j = 0; j < 3; j++) {\n        partyMembers[i].push({ monster: {} });\n      }\n    }\n\n    // Get string from param if there is any\n    const windowUrl = window.location.search;\n    const params = new URLSearchParams(windowUrl);\n\n    let loadString = params.get(\"b\");\n\n    // If a load string was provided (i.e. the ?b=<etc>), then attempt to create a party from that\n    // build string.\n    if (loadString) {\n      try {\n        const uids = this.parseLoadString(loadString);\n        let pm = this.populateFromUids(uids);\n        if (pm.status !== \"success\") {\n          notificationText = pm.noti;\n          notificationStatus = pm.status;\n        }\n        partyMembers = pm.partyMembers;\n      } catch (err) {\n        // TODO: Do something else with this, maybe.\n        console.log(\"Error:\", err);\n      }\n    }\n\n    // Parse specialization string (s)\n    let specialization = null;\n    let specString = params.get(\"s\");\n    if (specString) {\n      try {\n        specialization = this.parseSpecString(specString);\n      } catch (err) {\n        notificationText =\n          \"Error parsing specialization in URL: \" + err.message;\n        notificationStatus = \"error\";\n      }\n    }\n\n    // Parse anointment string (a)\n    let anointments = [];\n    const anointmentString = params.get(\"a\");\n    if (anointmentString) {\n      try {\n        anointments = this.parseAnointmentsString(anointmentString);\n      } catch (err) {\n        notificationText = \"Error parsing anointments in URL: \" + err.message;\n        notificationStatus = \"error\";\n      }\n    }\n    if (\n      specialization &&\n      specialization.name !== \"Royal\" &&\n      anointments.length > 5\n    ) {\n      anointments = anointments.slice(0, 5);\n    }\n\n    // TODO: Parse relic string (r)\n    const relicsString = params.get(\"r\");\n    if (relicsString) {\n      try {\n        relics = this.parseRelicsString(relicsString);\n      } catch (err) {\n        notificationText = \"Error parsing relics in URL: \" + err.message;\n        notificationStatus = \"error\";\n      }\n    }\n\n    this.setState({\n      anointments: anointments,\n      relics: relics,\n      currentSpecialization: specialization,\n      partyMembers: partyMembers,\n      notificationText: notificationText,\n      notificationStatus: notificationStatus,\n      notificationIndex: this.state.notificationIndex + 1,\n    });\n  }\n\n  /**\n   * On component mount, call the initial load function.\n   **/\n  componentDidMount() {\n    this.initialLoad();\n  }\n\n  /**\n   * Open the build modal by setting the state accordingly.\n   */\n  openUploadBuildModal() {\n    this.setState({\n      uploadBuildModalIsOpen: true,\n    });\n  }\n\n  /**\n   * Close the build modal by setting the state accordingly.\n   */\n  closeUploadBuildModal() {\n    this.setState({\n      uploadBuildModalIsOpen: false,\n    });\n  }\n\n  /**\n   * Open the info modal by setting the state accordingly.\n   */\n  openInfoModal() {\n    this.setState({\n      infoModalIsOpen: true,\n    });\n  }\n\n  /**\n   * Close the info modal by setting the state accordingly.\n   */\n  closeInfoModal() {\n    this.setState({\n      infoModalIsOpen: false,\n    });\n  }\n\n  // Open the monster selection modal.\n  // Set row_id and slot_id to the row_id and slot_id of the trait slot\n  // that the user clicked on, respectively.\n  // Set monster to equal the monster the user just clicked on\n  // (this is necessary to highlight the currently selected monster\n  // in the monster selection screen).\n\n  /**\n   * Open the monster selection modal.\n   * Set row_id and slot_id to the row_id and slot_id of the trait slot\n   * that the user clicked on, respectively.\n   * Set monster to equal the monster the user just clicked on\n   * (this is necessary to highlight the currently selected monster\n   * in the monster selection screen).\n   * @param  {Integer} partyMemberId The id of the party member, e.g. 1.\n   * @param  {Integer} traitSlotId   The id of the trait slot, e.g. 4.\n   * @param  {Object} monster       The monster object.\n   */\n  openModal(partyMemberId, traitSlotId, monster) {\n    this.setState(\n      {\n        modalIsOpen: true,\n        currentPartyMemberId: partyMemberId,\n        currentTraitSlotId: traitSlotId,\n        currentSelectedMonster: monster || null,\n      },\n      () => {\n        // Once open, prevent scrolling of the main page while the modal is open.\n        document.body.style[\"overflow-y\"] = \"hidden\";\n        document.getElementById(\"monster-search\").focus();\n      }\n    );\n  }\n\n  /**\n   * Close the monster selection modal.\n   * Enable scrolling of the main page again after it closes.\n   */\n  closeModal() {\n    this.setState(\n      {\n        modalIsOpen: false,\n        currentPartyMemberId: null,\n        currentTraitSlotId: null,\n        currentSelectedMonster: null,\n      },\n      () => {\n        document.body.style[\"overflow-y\"] = \"scroll\";\n      }\n    );\n  }\n\n  // Given an array of trait names, return an array\n  // consisting of the uids of those particular trait names,\n  // null if there was no trait in that slot,\n  // or <not found> if that trait name is not present in the\n  // trait map.\n\n  /**\n   * Given an array of trait names, return an array\n   * consisting of the uids of those particular trait names,\n   * null if there was no trait in that slot,\n   * or <not found> if that trait name is not present in the\n   * trait map.\n   * @param  {Array} traitsArray An array of trait names.\n   * @return {Array}             An array of the uids of those trait names.\n   */\n  traitsToUids(traitsArray) {\n    let uids = [];\n    for (let t of traitsArray) {\n      if (t === null) {\n        uids.push(null);\n        continue;\n      }\n      let t_ = t.toLowerCase();\n      if (monsterTraitMap.hasOwnProperty(t_)) {\n        uids.push(monsterTraitMap[t_]);\n      } else {\n        uids.push(\"<not found>\");\n      }\n    }\n    return uids;\n  }\n\n  /**\n   * Given a party string (from SU), build a party from that string.\n   * Call the callback function when finished - this will present an error\n   * in the upload party window if necessary.\n   * @param  {String}   str      The party string.\n   * @param  {Function} callback The function to call when complete.\n   */\n  uploadPartyFromString(str, callback) {\n    let notificationText = null;\n    let notificationStatus = null;\n\n    try {\n      let { traits, relics, spec, anointment_names } = parsePartyString(str);\n      let uids = this.traitsToUids(traits);\n      let pm = this.populateFromUids(uids);\n      if (pm.noti) notificationText = pm.noti;\n      if (pm.status) notificationStatus = pm.status;\n      let partyMembers = pm.partyMembers;\n\n      if (!specializationNameMap.hasOwnProperty(spec)) {\n        throw new Error('Specialization \"' + spec + '\" was not found.');\n      }\n      const specialization = specializationNameMap[spec];\n\n      let anointments = [];\n      for (let a of anointment_names) {\n        if (anointmentNameMap.hasOwnProperty(a)) {\n          anointments.push(anointmentNameMap[a]);\n        } else {\n          notificationText =\n            'Your build was loaded, but anointment \"' + a + '\" was not found.';\n          notificationStatus = \"warning\";\n          //anointments.push(null) // Note: This should ideally push an error or something\n          // and render it the same way it does with the party members\n          // whose traits do not exist.\n        }\n      }\n      anointments.slice(0, specialization.name === \"Royal\" ? 15 : 5);\n\n      // Get relics\n      let partyMemberRelics = new Array(6).fill(null);\n      for (let i = 0; i < relics.length; i++) {\n        for (let j = 0; j < relicsList.length; j++) {\n          if (relicsList[j].name === relics[i]) {\n            partyMemberRelics[i] = relicsList[j];\n            break;\n          }\n        }\n      }\n\n      this.setState(\n        {\n          partyMembers: partyMembers,\n          relics: partyMemberRelics,\n          uploadBuildModalIsOpen: false,\n          currentSpecialization: specialization,\n          anointments: anointments,\n          notificationText: notificationText,\n          notificationStatus: notificationStatus,\n          notificationIndex: this.state.notificationIndex + 1,\n        },\n        () => {\n          this.generateSaveString();\n          callback();\n        }\n      );\n    } catch (err) {\n      return callback(err);\n    }\n  }\n\n  /**\n   * Toggle an anointment, i.e. enable or disable it.\n   * @param  {Object} anointment The anointment to toggle.\n   */\n  toggleAnointment(anointment) {\n    if (anointment.anointment !== \"Yes\") return;\n\n    let anointments = this.state.anointments;\n    let deleted = false;\n    for (let i = 0; i < anointments.length; i++) {\n      const a = anointments[i];\n      // If this anointment in list, remove it and add a null at the end.\n      if (anointment.name === a.name) {\n        anointments.splice(i, 1);\n        deleted = true;\n        break;\n      }\n    }\n    if (!deleted) {\n      let limit = 5;\n      if (\n        this.state.currentSpecialization &&\n        this.state.currentSpecialization.name === \"Royal\"\n      ) {\n        limit = 15;\n      }\n      if (anointments.length < limit) {\n        anointments.push(anointment);\n      }\n    }\n    this.setState(\n      {\n        anointments: anointments,\n      },\n      this.generateSaveString\n    );\n  }\n\n  /**\n   * Simple function to return the max number of anointments for the given spec.\n   * @param  {Object} s The specialization.\n   * @return {Integer}   The max number of anointments.\n   */\n  getMaxAnointments(s) {\n    return s.name === \"Royal\" ? 15 : 5;\n  }\n\n  /**\n   * Update the Specialization based on the selected option from the react select component.\n   * @param  {Object} s The specialization to update to.\n   * @return {void}\n   */\n  updateSpecialization(s) {\n    const maxAnointments = this.getMaxAnointments(s);\n    let anointments = this.state.anointments;\n    if (anointments.length > maxAnointments) {\n      anointments = anointments.slice(0, maxAnointments);\n    }\n    this.setState(\n      {\n        anointments: anointments,\n        currentSpecialization: s,\n        maxAnointments: maxAnointments,\n      },\n      this.generateSaveString\n    );\n  }\n\n  /**\n   * Reset the entire build back (clear everything).\n   */\n  resetBuild() {\n    if (\n      !window.confirm(\"Are you sure you want to completely reset your build?\")\n    ) {\n      return;\n    }\n    this.props.history.push(\"/siralim-planner/\");\n    this.setState({ ...this.originalState }, () => {\n      this.initialLoad();\n      this.setState({\n        notificationText: \"Your build has been reset.\",\n        notificationStatus: \"success\",\n        notificationIndex: this.state.notificationIndex + 1,\n      });\n    });\n  }\n\n  /**\n   * Randomise the build (after prompting the user that this is really what\n   * they want to do).\n   */\n  randomiseBuild() {\n    if (!window.confirm(\"Are you sure you want to randomise your build?\")) {\n      return;\n    }\n\n    // Randomise specialization\n    const currentSpecialization = randomSample(specializationsList);\n\n    // Randomise relics.\n    // Ensure no relic is selected twice.\n    let relics = [];\n    let seenRelics = new Set();\n    for (let i = 0; i < 6; i++) {\n      let randomRelic = randomSample(relicsList);\n      while (seenRelics.has(randomRelic)) {\n        randomRelic = randomSample(relicsList);\n      }\n      seenRelics.add(randomRelic);\n      relics.push(randomRelic);\n    }\n\n    // Randomise party members\n    let partyMembers = [];\n    for (let i = 0; i < 6; i++) {\n      partyMembers.push([]);\n      for (let j = 0; j < 3; j++) {\n        let randomMonster = randomSample(monsterData);\n        while (getTraitErrors(randomMonster, j)) {\n          randomMonster = randomSample(monsterData);\n        }\n        partyMembers[i].push({ monster: randomMonster });\n      }\n    }\n\n    // Randomise anointments (don't allow duplicates).\n    let anointments = [];\n    let anointmentUIDs = [];\n    const maxAnointments = this.getMaxAnointments(currentSpecialization);\n    for (let i = 0; i < maxAnointments; i++) {\n      let randomAnointmentUID = randomSample(Object.keys(anointmentUIDMap));\n      while (anointmentUIDs.indexOf(randomAnointmentUID) >= 0) {\n        randomAnointmentUID = randomSample(Object.keys(anointmentUIDMap));\n      }\n      anointmentUIDs.push(randomAnointmentUID);\n      anointments.push(anointmentUIDMap[randomAnointmentUID]);\n    }\n\n    // Update notification text\n    const notificationText = \"Your build has been randomised.\";\n    const notificationStatus = \"success\";\n    const notificationIndex = this.state.notificationIndex + 1;\n\n    this.setState(\n      {\n        currentSpecialization,\n        relics,\n        partyMembers,\n        anointments,\n        notificationText,\n        notificationStatus,\n        notificationIndex,\n      },\n      this.generateSaveString\n    );\n  }\n\n  /**\n   * The render function.\n   * @return {ReactComponent} The main div containing the app.\n   */\n  render() {\n    return (\n      <div className=\"App\" id=\"app\">\n        <AppHeader\n          resetBuild={this.resetBuild.bind(this)}\n          randomiseBuild={this.randomiseBuild.bind(this)}\n          openUploadBuildModal={this.openUploadBuildModal.bind(this)}\n          openInfoModal={this.openInfoModal.bind(this)}\n          compendiumVersion={compendium_version}\n        />\n        <NotificationBanner\n          text={this.state.notificationText}\n          status={this.state.notificationStatus}\n          notificationIndex={this.state.notificationIndex}\n        />\n\n        <UploadPartyModal\n          modalIsOpen={this.state.uploadBuildModalIsOpen}\n          closeModal={this.closeUploadBuildModal.bind(this)}\n          uploadPartyFromString={this.uploadPartyFromString.bind(this)}\n        />\n        <InfoModal\n          modalIsOpen={this.state.infoModalIsOpen}\n          closeModal={this.closeInfoModal.bind(this)}\n        />\n\n        <div\n          className={\n            \"modal-overlay\" + (this.state.modalIsOpen ? \" is-open\" : \"\")\n          }\n        >\n          <MonsterSelectionModal\n            items={monsterData}\n            monstersInParty={this.state.monstersInParty}\n            closeModal={this.closeModal.bind(this)}\n            updatePartyMember={this.updatePartyMember.bind(this)}\n            currentSelectedMonster={this.state.currentSelectedMonster}\n            currentPartyMemberId={this.state.currentPartyMemberId}\n            currentTraitSlotId={this.state.currentTraitSlotId}\n          />\n        </div>\n\n        <main>\n          <SpecializationPlanner\n            currentSpecialization={this.state.currentSpecialization}\n            anointments={this.state.anointments}\n            maxAnointments={this.state.maxAnointments}\n            updateSpecialization={this.updateSpecialization.bind(this)}\n            updateAnointments={this.updateAnointments.bind(this)}\n            toggleAnointment={this.toggleAnointment.bind(this)}\n          />\n          <MonsterPlanner\n            partyMembers={this.state.partyMembers}\n            updatePartyMembers={this.updatePartyMembers.bind(this)}\n            openModal={this.openModal.bind(this)}\n            clearPartyMember={this.clearPartyMember.bind(this)}\n            relics={this.state.relics}\n            relicsList={relicsList}\n            updateRelics={this.updateRelics.bind(this)}\n          />\n        </main>\n        <AppFooter />\n      </div>\n    );\n  }\n}\n\nexport default withRouter(SiralimPlanner);\n","import React, {Component} from 'react';\nimport {  BrowserRouter } from \"react-router-dom\";\n\nimport SiralimPlanner from './SiralimPlanner';\n\nclass App extends Component {\n\n  render() {\n    return <BrowserRouter><SiralimPlanner/></BrowserRouter>\n  }\n}\n\n\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}